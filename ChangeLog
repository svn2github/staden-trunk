2004-10-27  jkbonfield  <jkbonfield>

	* src/spin_emboss/acd2tcl.tcl:
	(09:31:16) Updated to work with the latest ACD specification used
	in Emboss 2.9.0. This meant adding toggle and directory types. 

	* src/spin_emboss/create_emboss_files.tcl:
	(09:32:35) Updated to look for ACDs in share instead of share/data
	(change meaning it works with emboss 2.9.0). 

	* src/spin_emboss/emboss_utils.tcl,
	* src/spin_emboss/tclIndex:
	(09:33:44) Added an init_dialogue function and other bits to cope
	with the new implicit "acdprotein" variable. Now works with emboss
	2.9.0. 

	* tables/emboss_menu:
	(09:35:58) Regenerated from emboss 2.9.0. 

        * gaprc:
	(10:46:29) Improved the choice of background colours. Thanks Nancy!

2004-10-26  jkbonfield  <jkbonfield>

	* doc/Makefile:
	(10:20:04) Tidyup of distrib building. 

	* doc/manual/Makefile:
	(10:21:55) *** empty log message *** 

	* doc/manual/manual.texi,
	* doc/manual/mini_manual.texi:
	(10:23:06) Moved contents pages to start of output. 

	* doc/manual/tools/update-nodes:
	(10:23:33) Use relative pathnames instead of an absolute DOCDIR. 

	* src/Makefile:
	(10:23:56) Updated distrib building. 

	* src/pregap4/templates.tcl:
	(10:24:54) Disabled the filebrowser memory of last directory for
	the add naming scheme / config template. 

	* src/spin/tkSeqedUtils.c:
	(10:25:33) Include <tk.h> so that the Tk xlib is picked up on
	Windows. 

	* src/gap4/f2c.h:
	(10:32:31) Added min/max defs (so that legacy_f2c.c works) 

	* src/mk/alpha.mk:
	(10:35:47) Removed -lfor as it's no longer needed with our new
	f2c.c hacks. 

	* src/trev/trev.tcl:
	(13:55:34) Set version to 1.9 

	* src/pregap4/gui.tcl:
	(13:57:29) Updated version to 1.5 

	* src/gap4/gap.tcl:
	(13:57:50) Updated version to 4.10 

2004-10-25  jkbonfield  <jkbonfield>

	* src/gap4/edUtils2.c:
	(11:03:36) Temporarily disable the "show read pair traces" option
	when bringing up all traces on the consensus (to avoid duplicates
	appearing in the trace display). 

	* tables/gaprc:
	(11:16:20) Minor defaults adjustments. 

	* doc/manual/2nd_highest_confidence.unix.png,
	* doc/manual/assembly.CAP3.unix.png,
	* doc/manual/assembly.cap2.unix.png,
	* doc/manual/assembly.directed.unix.png,
	* doc/manual/assembly.fak2.unix.png,
	* doc/manual/assembly.new.unix.png,
	* doc/manual/assembly.one.unix.png,
	* doc/manual/assembly.screen.unix.png,
	* doc/manual/assembly.shot.unix.png,
	* doc/manual/assembly.single.unix.png,
	* doc/manual/break_contig.unix.png,
	* doc/manual/calc_consensus.extended.unix.png,
	* doc/manual/calc_consensus.normal.unix.png,
	* doc/manual/calc_consensus.quality.unix.png:
	(11:22:32) Replaced all GIFs with PNGs. 

	* doc/manual/NBase_clip.unix.png,
	* doc/manual/c_order_lb.unix.png,
	* doc/manual/c_order_t1.small.unix.png,
	* doc/manual/c_order_t1.unix.png,
	* doc/manual/c_order_t2.small.unix.png,
	* doc/manual/c_order_t2.unix.png,
	* doc/manual/calc_consensus.unfinished.unix.png,
	* doc/manual/check_ass.unix.png,
	* doc/manual/comparator.small.unix.png,
	* doc/manual/comparator.unix.png,
	* doc/manual/conf_values_p.small.unix.png,
	* doc/manual/conf_values_p.unix.png,
	* doc/manual/configure.colour.unix.png,
	* doc/manual/consistency_p.small.unix.png,
	* doc/manual/consistency_p.unix.png,
	* doc/manual/contig_editor.join.small.unix.png,
	* doc/manual/contig_editor.join.unix.png,
	* doc/manual/contig_editor.screen.small.unix.png,
	* doc/manual/contig_editor.screen.unix.png,
	* doc/manual/contig_editor.search.unix.png,
	* doc/manual/contig_editor.taged.unix.png,
	* doc/manual/contig_editor.tagmacro.unix.png,
	* doc/manual/contig_editor.tagsel.unix.png,
	* doc/manual/contig_editor.traces.compact.small.unix.png,
	* doc/manual/contig_editor.traces.compact.unix.png,
	* doc/manual/contig_editor.traces.small.unix.png,
	* doc/manual/contig_editor.traces.unix.png,
	* doc/manual/contig_editor_grey_scale.small.unix.png,
	* doc/manual/contig_editor_grey_scale.unix.png,
	* doc/manual/contig_list_box.unix.png,
	* doc/manual/contig_navigation_browse.unix.png,
	* doc/manual/contig_navigation_table.unix.png,
	* doc/manual/contig_selector.unix.png,
	* doc/manual/copy_reads.dialogue.unix.png,
	* doc/manual/difference_clip.unix.png,
	* doc/manual/disassembly.unix.png,
	* doc/manual/discrepancy_graph.unix.png,
	* doc/manual/doctor_db.main.unix.png,
	* doc/manual/doctor_db.structures.unix.png,
	* doc/manual/exp_suggest.comp.unix.png,
	* doc/manual/exp_suggest.double.unix.png,
	* doc/manual/exp_suggest.long.unix.png,
	* doc/manual/exp_suggest.primers.unix.png,
	* doc/manual/extract.unix.png,
	* doc/manual/fij.dialogue.unix.png,
	* doc/manual/filebrowser.unix.png,
	* doc/manual/find_oligo_pic.unix.png,
	* doc/manual/interface.buttons.unix.png,
	* doc/manual/interface.colour.unix.png,
	* doc/manual/interface.entry.unix.png,
	* doc/manual/interface.fonts.unix.png,
	* doc/manual/interface.menus.unix.png,
	* doc/manual/interface.output.small.unix.png,
	* doc/manual/interface.output.unix.png,
	* doc/manual/interface.tag.unix.png,
	* doc/manual/mut_contig_editor5.small.unix.png,
	* doc/manual/mut_contig_editor5.unix.png,
	* doc/manual/mut_contig_editor_dis5.small.unix.png,
	* doc/manual/mut_contig_editor_dis5.unix.png,
	* doc/manual/mut_mutscan_adaptive_noise_threshold.unix.png,
	* doc/manual/mut_mutscan_peak_alignment_threshold.unix.png,
	* doc/manual/mut_mutscan_peak_drop_threshold.unix.png,
	* doc/manual/mut_pregap4.unix.png,
	* doc/manual/mut_template_all.small.unix.png,
	* doc/manual/mut_template_all.unix.png,
	* doc/manual/mut_template_reads.small.unix.png,
	* doc/manual/mut_template_reads.unix.png,
	* doc/manual/mut_template_reads_single.small.unix.png,
	* doc/manual/mut_template_reads_single.unix.png,
	* doc/manual/mut_traces_het.small.unix.png,
	* doc/manual/mut_traces_het.unix.png,
	* doc/manual/mut_traces_point.small.unix.png,
	* doc/manual/mut_traces_point.unix.png,
	* doc/manual/mut_traces_positive.small.unix.png,
	* doc/manual/mut_traces_positive.unix.png,
	* doc/manual/notes.editor.unix.png,
	* doc/manual/notes.selector.unix.png,
	* doc/manual/phrap.assembly.unix.png,
	* doc/manual/pregap4_compact.unix.png,
	* doc/manual/pregap4_component.unix.png,
	* doc/manual/pregap4_config.unix.png,
	* doc/manual/pregap4_edit_exp.unix.png,
	* doc/manual/pregap4_files.unix.png,
	* doc/manual/pregap4_overview.unix.png,
	* doc/manual/pregap4_overview2.unix.png,
	* doc/manual/pregap4_select.unix.png,
	* doc/manual/pregap4_separate.unix.png,
	* doc/manual/pregap4_simpledb.unix.png,
	* doc/manual/pregap4_textwin.unix.png,
	* doc/manual/primer_pos_plot.small.unix.png,
	* doc/manual/primer_pos_plot.unix.png,
	* doc/manual/primer_pos_seq_display.small.unix.png,
	* doc/manual/primer_pos_seq_display.unix.png,
	* doc/manual/primer_pos_text.unix.png,
	* doc/manual/quality_clip.unix.png,
	* doc/manual/quality_clip_ends.unix.png,
	* doc/manual/read_coverage_d.unix.png,
	* doc/manual/read_coverage_p.small.unix.png,
	* doc/manual/read_coverage_p.unix.png,
	* doc/manual/read_pairs.unix.png,
	* doc/manual/readpair_coverage_p.small.unix.png,
	* doc/manual/readpair_coverage_p.unix.png,
	* doc/manual/repeats.unix.png,
	* doc/manual/restrict_enzymes.small.unix.png,
	* doc/manual/restrict_enzymes.unix.png,
	* doc/manual/results.1.unix.png,
	* doc/manual/set_genetic_code.unix.png,
	* doc/manual/show_rel.unix.png,
	* doc/manual/spin_align_p.small.unix.png,
	* doc/manual/spin_align_p.unix.png,
	* doc/manual/spin_align_seq.unix.png,
	* doc/manual/spin_alignment_symbols.unix.png,
	* doc/manual/spin_author_d.unix.png,
	* doc/manual/spin_author_p.small.unix.png,
	* doc/manual/spin_author_p.unix.png,
	* doc/manual/spin_base_bias_d.unix.png,
	* doc/manual/spin_base_bias_p.small.unix.png,
	* doc/manual/spin_base_bias_p.unix.png,
	* doc/manual/spin_codon_usage.small.unix.png,
	* doc/manual/spin_codon_usage.unix.png,
	* doc/manual/spin_codon_usage_aaonly.small.unix.png,
	* doc/manual/spin_codon_usage_aaonly.unix.png,
	* doc/manual/spin_codon_usage_dial.unix.png,
	* doc/manual/spin_count_codons_d.unix.png,
	* doc/manual/spin_count_codons_t.small.unix.png,
	* doc/manual/spin_count_codons_t.unix.png,
	* doc/manual/spin_diagonals.unix.png,
	* doc/manual/spin_dot_plot.small.unix.png,
	* doc/manual/spin_dot_plot.unix.png,
	* doc/manual/spin_find_orf_d.unix.png,
	* doc/manual/spin_local_align.unix.png,
	* doc/manual/spin_local_p1.small.unix.png:
	(11:22:33) Replaced all GIFs with PNGs. 

	* doc/manual/spin_local_p1.unix.png,
	* doc/manual/spin_local_p2.small.unix.png,
	* doc/manual/spin_local_p2.unix.png,
	* doc/manual/spin_match_words.unix.png,
	* doc/manual/spin_personal_search.unix.png,
	* doc/manual/spin_plot.small.unix.png,
	* doc/manual/spin_plot.unix.png,
	* doc/manual/spin_plot_base_comp_d.unix.png,
	* doc/manual/spin_plot_base_comp_p.small.unix.png,
	* doc/manual/spin_plot_base_comp_p.unix.png,
	* doc/manual/spin_plot_drag1.small.unix.png,
	* doc/manual/spin_plot_drag1.unix.png,
	* doc/manual/spin_plot_drag2.small.unix.png,
	* doc/manual/spin_plot_drag2.unix.png,
	* doc/manual/spin_plot_drag3.small.unix.png,
	* doc/manual/spin_plot_drag3.unix.png,
	* doc/manual/spin_plot_p.small.unix.png,
	* doc/manual/spin_plot_p.unix.png,
	* doc/manual/spin_restrict_enzymes_d.unix.png,
	* doc/manual/spin_restrict_enzymes_p.small.unix.png,
	* doc/manual/spin_restrict_enzymes_p.unix.png,
	* doc/manual/spin_restrict_enzymes_p1.small.unix.png,
	* doc/manual/spin_restrict_enzymes_p1.unix.png,
	* doc/manual/spin_results_manager_d.unix.png,
	* doc/manual/spin_results_manager_d2.small.unix.png,
	* doc/manual/spin_results_manager_d2.unix.png,
	* doc/manual/spin_save_sequence_d.unix.png,
	* doc/manual/spin_seq_display.small.unix.png,
	* doc/manual/spin_seq_display.unix.png,
	* doc/manual/spin_seq_manager.unix.png,
	* doc/manual/spin_sequence_display_d.unix.png,
	* doc/manual/spin_sequence_display_save_d.unix.png,
	* doc/manual/spin_sequence_display_t.small.unix.png,
	* doc/manual/spin_sequence_display_t.unix.png,
	* doc/manual/spin_similar_spans.unix.png,
	* doc/manual/spin_simple_search.unix.png,
	* doc/manual/spin_splice.small.unix.png,
	* doc/manual/spin_splice.unix.png,
	* doc/manual/spin_start_d.unix.png,
	* doc/manual/spin_start_p.small.unix.png,
	* doc/manual/spin_start_p.unix.png,
	* doc/manual/spin_stops_d.unix.png:
	(11:22:34) Replaced all GIFs with PNGs. 

	* doc/manual/spin_stops_p.small.unix.png,
	* doc/manual/spin_stops_p.unix.png,
	* doc/manual/spin_stops_p2.small.unix.png,
	* doc/manual/spin_stops_p2.unix.png,
	* doc/manual/spin_string_search_d.unix.png,
	* doc/manual/spin_string_search_p.small.unix.png,
	* doc/manual/spin_string_search_p.unix.png,
	* doc/manual/spin_translate_d.unix.png,
	* doc/manual/spin_translate_t.small.unix.png,
	* doc/manual/spin_translate_t.unix.png,
	* doc/manual/spin_trna_p.small.unix.png,
	* doc/manual/spin_trna_p.unix.png,
	* doc/manual/spin_trna_t.small.unix.png,
	* doc/manual/spin_trna_t.unix.png,
	* doc/manual/spin_weight_matrix.small.unix.png,
	* doc/manual/spin_weight_matrix.unix.png,
	* doc/manual/spin_weight_matrix_dial.unix.png,
	* doc/manual/stops.small.unix.png,
	* doc/manual/stops.unix.png,
	* doc/manual/strand_coverage_d.unix.png,
	* doc/manual/strand_coverage_p1.small.unix.png,
	* doc/manual/strand_coverage_p1.unix.png,
	* doc/manual/strand_coverage_p2.small.unix.png,
	* doc/manual/strand_coverage_p2.unix.png,
	* doc/manual/suggest_probes.main.unix.png,
	* doc/manual/suggest_probes.select.unix.png,
	* doc/manual/template.dialogue.unix.png,
	* doc/manual/template.display.small.unix.png,
	* doc/manual/template.display.unix.png,
	* doc/manual/template.quality.small.unix.png,
	* doc/manual/template.quality.unix.png,
	* doc/manual/template.restriction.small.unix.png,
	* doc/manual/template.restriction.unix.png,
	* doc/manual/template_status.unix.png,
	* doc/manual/trace_print_menu.small.unix.png,
	* doc/manual/trace_print_menu.unix.png,
	* doc/manual/trace_print_page_dialogue.unix.png,
	* doc/manual/trace_print_trace1.unix.png,
	* doc/manual/trace_print_trace_dialogue.unix.png,
	* doc/manual/trev_conf_trace.small.unix.png,
	* doc/manual/trev_conf_trace.unix.png,
	* doc/manual/trev_pic.unix.png:
	(11:22:35) Replaced all GIFs with PNGs. 

	* doc/manual/Attic/2nd_highest_confidence.unix.gif,
	* doc/manual/Attic/assembly.CAP3.unix.gif,
	* doc/manual/Attic/assembly.cap2.unix.gif,
	* doc/manual/Attic/assembly.directed.unix.gif,
	* doc/manual/Attic/assembly.fak2.unix.gif,
	* doc/manual/Attic/assembly.new.unix.gif,
	* doc/manual/Attic/assembly.one.unix.gif,
	* doc/manual/Attic/assembly.screen.unix.gif:
	(11:25:11) Replaced GIFs with PNGs. 

	* doc/manual/Attic/assembly.shot.unix.gif,
	* doc/manual/Attic/assembly.single.unix.gif,
	* doc/manual/Attic/break_contig.unix.gif,
	* doc/manual/Attic/c_order_lb.unix.gif,
	* doc/manual/Attic/c_order_t1.small.unix.gif,
	* doc/manual/Attic/c_order_t1.unix.gif,
	* doc/manual/Attic/c_order_t2.small.unix.gif,
	* doc/manual/Attic/c_order_t2.unix.gif,
	* doc/manual/Attic/calc_consensus.extended.unix.gif,
	* doc/manual/Attic/calc_consensus.normal.unix.gif,
	* doc/manual/Attic/calc_consensus.quality.unix.gif,
	* doc/manual/Attic/calc_consensus.unfinished.unix.gif,
	* doc/manual/Attic/check_ass.unix.gif,
	* doc/manual/Attic/comparator.small.unix.gif,
	* doc/manual/Attic/comparator.unix.gif,
	* doc/manual/Attic/conf_values_p.small.unix.gif,
	* doc/manual/Attic/conf_values_p.unix.gif,
	* doc/manual/Attic/configure.colour.unix.gif,
	* doc/manual/Attic/consistency_p.small.unix.gif,
	* doc/manual/Attic/consistency_p.unix.gif,
	* doc/manual/Attic/contig_editor.join.small.unix.gif,
	* doc/manual/Attic/contig_editor.join.unix.gif,
	* doc/manual/Attic/contig_editor.screen.small.unix.gif,
	* doc/manual/Attic/contig_editor.screen.unix.gif,
	* doc/manual/Attic/contig_editor.search.unix.gif,
	* doc/manual/Attic/contig_editor.taged.unix.gif,
	* doc/manual/Attic/contig_editor.tagmacro.unix.gif,
	* doc/manual/Attic/contig_editor.tagsel.unix.gif,
	* doc/manual/Attic/contig_editor.traces.compact.small.unix.gif,
	* doc/manual/Attic/contig_editor.traces.compact.unix.gif,
	* doc/manual/Attic/contig_editor.traces.small.unix.gif,
	* doc/manual/Attic/contig_editor.traces.unix.gif,
	* doc/manual/Attic/contig_editor_grey_scale.small.unix.gif,
	* doc/manual/Attic/contig_editor_grey_scale.unix.gif,
	* doc/manual/Attic/contig_list_box.unix.gif,
	* doc/manual/Attic/contig_navigation_browse.unix.gif,
	* doc/manual/Attic/contig_navigation_table.unix.gif,
	* doc/manual/Attic/contig_selector.unix.gif,
	* doc/manual/Attic/copy_reads.dialogue.unix.gif,
	* doc/manual/Attic/difference_clip.unix.gif,
	* doc/manual/Attic/disassembly.unix.gif,
	* doc/manual/Attic/discrepancy_graph.unix.gif,
	* doc/manual/Attic/doctor_db.main.unix.gif,
	* doc/manual/Attic/doctor_db.structures.unix.gif,
	* doc/manual/Attic/exp_suggest.comp.unix.gif,
	* doc/manual/Attic/exp_suggest.double.unix.gif,
	* doc/manual/Attic/exp_suggest.long.unix.gif,
	* doc/manual/Attic/exp_suggest.primers.unix.gif,
	* doc/manual/Attic/extract.unix.gif,
	* doc/manual/Attic/fij.dialogue.unix.gif,
	* doc/manual/Attic/filebrowser.unix.gif,
	* doc/manual/Attic/find_oligo_pic.unix.gif,
	* doc/manual/Attic/interface.buttons.unix.gif,
	* doc/manual/Attic/interface.colour.unix.gif,
	* doc/manual/Attic/interface.entry.unix.gif,
	* doc/manual/Attic/interface.fonts.unix.gif,
	* doc/manual/Attic/interface.menus.unix.gif,
	* doc/manual/Attic/interface.output.small.unix.gif,
	* doc/manual/Attic/interface.output.unix.gif,
	* doc/manual/Attic/interface.tag.unix.gif:
	(11:25:12) Replaced GIFs with PNGs. 

	* doc/manual/Attic/NBase_clip.unix.gif,
	* doc/manual/Attic/mut_contig_editor5.small.unix.gif,
	* doc/manual/Attic/mut_contig_editor5.unix.gif,
	* doc/manual/Attic/mut_contig_editor_dis5.small.unix.gif,
	* doc/manual/Attic/mut_contig_editor_dis5.unix.gif,
	* doc/manual/Attic/mut_mutscan_adaptive_noise_threshold.unix.gif,
	* doc/manual/Attic/mut_mutscan_peak_alignment_threshold.unix.gif,
	* doc/manual/Attic/mut_mutscan_peak_drop_threshold.unix.gif,
	* doc/manual/Attic/mut_pregap4.unix.gif,
	* doc/manual/Attic/mut_template_all.small.unix.gif,
	* doc/manual/Attic/mut_template_all.unix.gif,
	* doc/manual/Attic/mut_template_reads.small.unix.gif,
	* doc/manual/Attic/mut_template_reads.unix.gif,
	* doc/manual/Attic/mut_template_reads_single.small.unix.gif,
	* doc/manual/Attic/mut_template_reads_single.unix.gif,
	* doc/manual/Attic/mut_traces_het.small.unix.gif,
	* doc/manual/Attic/mut_traces_het.unix.gif,
	* doc/manual/Attic/mut_traces_point.small.unix.gif,
	* doc/manual/Attic/mut_traces_point.unix.gif,
	* doc/manual/Attic/mut_traces_positive.small.unix.gif,
	* doc/manual/Attic/mut_traces_positive.unix.gif,
	* doc/manual/Attic/notes.editor.unix.gif,
	* doc/manual/Attic/notes.selector.unix.gif,
	* doc/manual/Attic/phrap.assembly.unix.gif,
	* doc/manual/Attic/pregap4_compact.unix.gif,
	* doc/manual/Attic/pregap4_component.unix.gif,
	* doc/manual/Attic/pregap4_config.unix.gif,
	* doc/manual/Attic/pregap4_edit_exp.unix.gif,
	* doc/manual/Attic/pregap4_files.unix.gif,
	* doc/manual/Attic/pregap4_overview.unix.gif,
	* doc/manual/Attic/pregap4_overview2.unix.gif,
	* doc/manual/Attic/pregap4_select.unix.gif,
	* doc/manual/Attic/pregap4_separate.unix.gif,
	* doc/manual/Attic/pregap4_simpledb.unix.gif,
	* doc/manual/Attic/pregap4_textwin.unix.gif,
	* doc/manual/Attic/primer_pos_plot.small.unix.gif,
	* doc/manual/Attic/primer_pos_plot.unix.gif,
	* doc/manual/Attic/primer_pos_seq_display.small.unix.gif,
	* doc/manual/Attic/primer_pos_seq_display.unix.gif,
	* doc/manual/Attic/primer_pos_text.unix.gif,
	* doc/manual/Attic/quality_clip_ends.unix.gif:
	(11:25:13) Replaced GIFs with PNGs. 

	* doc/manual/Attic/quality_clip.unix.gif,
	* doc/manual/Attic/read_coverage_d.unix.gif,
	* doc/manual/Attic/read_coverage_p.small.unix.gif,
	* doc/manual/Attic/read_coverage_p.unix.gif,
	* doc/manual/Attic/read_pairs.unix.gif,
	* doc/manual/Attic/readpair_coverage_p.small.unix.gif,
	* doc/manual/Attic/readpair_coverage_p.unix.gif,
	* doc/manual/Attic/repeats.unix.gif,
	* doc/manual/Attic/restrict_enzymes.small.unix.gif,
	* doc/manual/Attic/restrict_enzymes.unix.gif,
	* doc/manual/Attic/results.1.unix.gif,
	* doc/manual/Attic/set_genetic_code.unix.gif,
	* doc/manual/Attic/show_rel.unix.gif,
	* doc/manual/Attic/spin_align_p.small.unix.gif,
	* doc/manual/Attic/spin_align_p.unix.gif,
	* doc/manual/Attic/spin_align_seq.unix.gif,
	* doc/manual/Attic/spin_alignment_symbols.gif,
	* doc/manual/Attic/spin_alignment_symbols.unix.gif,
	* doc/manual/Attic/spin_author_d.unix.gif,
	* doc/manual/Attic/spin_author_p.small.unix.gif,
	* doc/manual/Attic/spin_author_p.unix.gif,
	* doc/manual/Attic/spin_base_bias_d.unix.gif,
	* doc/manual/Attic/spin_base_bias_p.small.unix.gif,
	* doc/manual/Attic/spin_base_bias_p.unix.gif,
	* doc/manual/Attic/spin_codon_usage.small.unix.gif,
	* doc/manual/Attic/spin_codon_usage.unix.gif,
	* doc/manual/Attic/spin_codon_usage_aaonly.small.unix.gif,
	* doc/manual/Attic/spin_codon_usage_aaonly.unix.gif,
	* doc/manual/Attic/spin_codon_usage_dial.unix.gif,
	* doc/manual/Attic/spin_count_codons_d.unix.gif,
	* doc/manual/Attic/spin_count_codons_t.small.unix.gif,
	* doc/manual/Attic/spin_count_codons_t.unix.gif,
	* doc/manual/Attic/spin_diagonals.unix.gif,
	* doc/manual/Attic/spin_dot_plot.small.unix.gif,
	* doc/manual/Attic/spin_dot_plot.unix.gif,
	* doc/manual/Attic/spin_find_orf_d.unix.gif,
	* doc/manual/Attic/spin_local_align.unix.gif,
	* doc/manual/Attic/spin_local_p1.small.unix.gif,
	* doc/manual/Attic/spin_local_p1.unix.gif,
	* doc/manual/Attic/spin_local_p2.small.unix.gif,
	* doc/manual/Attic/spin_local_p2.unix.gif,
	* doc/manual/Attic/spin_match_words.unix.gif,
	* doc/manual/Attic/spin_personal_search.unix.gif,
	* doc/manual/Attic/spin_plot_base_comp_d.unix.gif,
	* doc/manual/Attic/spin_plot_base_comp_p.small.unix.gif,
	* doc/manual/Attic/spin_plot_base_comp_p.unix.gif,
	* doc/manual/Attic/spin_plot_drag1.small.unix.gif,
	* doc/manual/Attic/spin_plot_drag1.unix.gif,
	* doc/manual/Attic/spin_plot_drag2.small.unix.gif,
	* doc/manual/Attic/spin_plot_drag2.unix.gif,
	* doc/manual/Attic/spin_plot_drag3.small.unix.gif,
	* doc/manual/Attic/spin_plot_drag3.unix.gif,
	* doc/manual/Attic/spin_plot_p.small.unix.gif,
	* doc/manual/Attic/spin_plot_p.unix.gif:
	(11:25:14) Replaced GIFs with PNGs. 

	* doc/manual/Attic/spin_plot.small.unix.gif,
	* doc/manual/Attic/spin_plot.unix.gif,
	* doc/manual/Attic/spin_restrict_enzymes_d.unix.gif,
	* doc/manual/Attic/spin_restrict_enzymes_p.small.unix.gif,
	* doc/manual/Attic/spin_restrict_enzymes_p.unix.gif,
	* doc/manual/Attic/spin_restrict_enzymes_p1.small.unix.gif,
	* doc/manual/Attic/spin_restrict_enzymes_p1.unix.gif,
	* doc/manual/Attic/spin_results_manager_d.unix.gif,
	* doc/manual/Attic/spin_results_manager_d2.small.unix.gif,
	* doc/manual/Attic/spin_results_manager_d2.unix.gif,
	* doc/manual/Attic/spin_save_sequence_d.gif,
	* doc/manual/Attic/spin_save_sequence_d.unix.gif,
	* doc/manual/Attic/spin_seq_display.small.unix.gif,
	* doc/manual/Attic/spin_seq_display.unix.gif,
	* doc/manual/Attic/spin_seq_manager.unix.gif,
	* doc/manual/Attic/spin_sequence_display_d.unix.gif,
	* doc/manual/Attic/spin_sequence_display_save_d.unix.gif,
	* doc/manual/Attic/spin_sequence_display_t.small.unix.gif,
	* doc/manual/Attic/spin_sequence_display_t.unix.gif,
	* doc/manual/Attic/spin_similar_spans.unix.gif,
	* doc/manual/Attic/spin_simple_search.unix.gif,
	* doc/manual/Attic/spin_splice.small.unix.gif,
	* doc/manual/Attic/spin_splice.unix.gif,
	* doc/manual/Attic/spin_start_d.unix.gif,
	* doc/manual/Attic/spin_start_p.small.unix.gif,
	* doc/manual/Attic/spin_start_p.unix.gif,
	* doc/manual/Attic/spin_stops_d.unix.gif,
	* doc/manual/Attic/spin_stops_p.small.unix.gif,
	* doc/manual/Attic/spin_stops_p.unix.gif,
	* doc/manual/Attic/spin_stops_p2.small.unix.gif,
	* doc/manual/Attic/spin_stops_p2.unix.gif,
	* doc/manual/Attic/spin_string_search_d.unix.gif,
	* doc/manual/Attic/spin_string_search_p.small.unix.gif,
	* doc/manual/Attic/spin_string_search_p.unix.gif,
	* doc/manual/Attic/spin_translate_d.gif,
	* doc/manual/Attic/spin_translate_d.unix.gif,
	* doc/manual/Attic/spin_translate_t.small.unix.gif,
	* doc/manual/Attic/spin_translate_t.unix.gif,
	* doc/manual/Attic/spin_trna_p.small.unix.gif,
	* doc/manual/Attic/spin_trna_p.unix.gif,
	* doc/manual/Attic/spin_trna_t.small.unix.gif,
	* doc/manual/Attic/spin_trna_t.unix.gif,
	* doc/manual/Attic/spin_weight_matrix.small.unix.gif,
	* doc/manual/Attic/spin_weight_matrix.unix.gif,
	* doc/manual/Attic/spin_weight_matrix_dial.unix.gif,
	* doc/manual/Attic/stops.small.unix.gif,
	* doc/manual/Attic/stops.unix.gif,
	* doc/manual/Attic/strand_coverage_d.unix.gif,
	* doc/manual/Attic/strand_coverage_p1.small.unix.gif,
	* doc/manual/Attic/strand_coverage_p1.unix.gif,
	* doc/manual/Attic/strand_coverage_p2.small.unix.gif,
	* doc/manual/Attic/strand_coverage_p2.unix.gif,
	* doc/manual/Attic/suggest_probes.main.unix.gif,
	* doc/manual/Attic/suggest_probes.select.unix.gif:
	(11:25:15) Replaced GIFs with PNGs. 

	* doc/manual/Attic/template.dialogue.unix.gif,
	* doc/manual/Attic/template.display.small.unix.gif,
	* doc/manual/Attic/template.display.unix.gif,
	* doc/manual/Attic/template.quality.small.unix.gif,
	* doc/manual/Attic/template.quality.unix.gif,
	* doc/manual/Attic/template.restriction.small.unix.gif,
	* doc/manual/Attic/template.restriction.unix.gif,
	* doc/manual/Attic/template_status.unix.gif,
	* doc/manual/Attic/trace_print_menu.small.unix.gif,
	* doc/manual/Attic/trace_print_menu.unix.gif,
	* doc/manual/Attic/trace_print_page_dialogue.unix.gif,
	* doc/manual/Attic/trace_print_trace1.unix.gif,
	* doc/manual/Attic/trace_print_trace_dialogue.unix.gif,
	* doc/manual/Attic/trev_conf_trace.small.unix.gif,
	* doc/manual/Attic/trev_conf_trace.unix.gif,
	* doc/manual/Attic/trev_pic.unix.gif:
	(11:25:16) Replaced GIFs with PNGs. 

	* doc/manual/tools/make_dependencies,
	* doc/manual/tools/make_pdf,
	* doc/manual/tools/make_png_html:
	(11:30:53) Switched from gif to png and ps to pdf for embedded
	images. 

	* doc/manual/dependencies,
	* doc/manual/header.m4:
	(11:32:02) Switched to using png/pdf instead of gif/ps for embedded
	images. 

	* doc/manual/Makefile:
	(11:32:32) Switched to using png/pdf instead of gif/ps for embedded
	images. 

	* doc/manual/getABIfield.1.texi,
	* doc/manual/trace_dump.1.texi:
	(11:35:13) First draft of new manual pages 

	* doc/manual/tools/merge_indexes.pl:
	(14:45:04) Updated version number for manual page output 

	* doc/manual/preface-t.texi:
	(15:06:51) Updated to describe the demise of the LMB group and the
	move to sourceforge. 

	* doc/scripting_manual/Makefile:
	(15:39:12) Changed to generate pdf instead of PostScript. 

2004-10-21  jkbonfield  <jkbonfield>

	* doc/manual/Makefile:
	(08:57:38) *** empty log message *** 

	* doc/manual/assembly-t.texi,
	* doc/manual/calc_consensus-t.texi,
	* doc/manual/clip-t.texi,
	* doc/manual/configure-t.texi:
	(09:00:25) Various doc updates 

	* doc/manual/consistency_display-t.texi,
	* doc/manual/contig_editor-t.texi,
	* doc/manual/contig_selector-t.texi,
	* doc/manual/dependencies,
	* doc/manual/disassembly-t.texi,
	* doc/manual/fij-t.texi,
	* doc/manual/gap4-t.texi,
	* doc/manual/gap4_intro-t.texi,
	* doc/manual/lists-t.texi,
	* doc/manual/manpages-t.texi:
	(09:00:26) Various doc updates 

	* doc/manual/2nd_highest_confidence.unix.gif,
	* doc/manual/NBase_clip.unix.gif,
	* doc/manual/assembly.directed.unix.gif,
	* doc/manual/calc_consensus.normal.unix.gif,
	* doc/manual/contig_editor.taged.unix.gif,
	* doc/manual/contig_editor.tagmacro.unix.gif,
	* doc/manual/contig_list_box.unix.gif,
	* doc/manual/disassembly.unix.gif,
	* doc/manual/discrepancy_graph.unix.gif,
	* doc/manual/fij.dialogue.unix.gif,
	* doc/manual/quality_clip_ends.unix.gif,
	* doc/manual/template_status.unix.gif:
	(09:13:11) *** empty log message *** 

	* doc/manual/man/man1/convert_trace.1,
	* doc/manual/man/man1/eba.1,
	* doc/manual/man/man1/extract_seq.1,
	* doc/manual/man/man1/find_renz.1,
	* doc/manual/man/man1/get_comment.1,
	* doc/manual/man/man1/get_scf_field.1,
	* doc/manual/man/man1/init_exp.1,
	* doc/manual/man/man1/makeSCF.1:
	(09:13:38) *** empty log message *** 

	* src/gap4/edInterface.c:
	(09:15:53) Minor comment updates 

	* src/gap4/gap.tcl:
	(09:16:42) Adjust global colour scheme when multiple gap4s are in
	use at the same time on the same display. 

	* src/hetins/hetins.c:
	(09:35:32) Protect against lack of QR values in experiment files. 

	* src/scripts/fasta2exp:
	(09:36:16) *** empty log message *** 

	* tables/gaprc:
	(09:40:50) Added BACKGROUNDS def. 

	* src/gap4/trace_display.tcl
	Added mouse-wheel support.
	Increased number of rows allowed from 5 to 6.

2004-10-20  jkbonfield  <jkbonfield>

	* src/abi/getABIfield.c:
	(11:10:28) Added a line-separator control. 

	* src/gap4/searchUtils.c:
	(13:18:45) Added the ability to find tags with confidence 0 or 100
	in the "edit" search. 

	* doc/manual/tools/texi2man.pl:
	(13:24:30) Corrected SEE ALSO expansion to find _fxref() instead of
	@fxref{}. 

2004-10-14  jkbonfield  <jkbonfield>

	* src/io_lib/progs/convert_trace.c:
	(15:38:18) Added a "-subtract <amount>" option to allow removal of
	a specific DC offset. 

2004-10-13  jkbonfield  <jkbonfield>

	* src/gap4/acd2tag.tcl:
	(09:14:49) "variable:" records are now read and written to the tag. 

2004-10-12  jkbonfield  <jkbonfield>

	* src/gap4/newgap_cmds.c:
	(14:15:12) Changed the default value for -ignore_vec on
	assemble_direct as it appears that I had the backwards compatible
	behaviour backwards. 

2004-10-11  jkbonfield  <jkbonfield>

	* src/gap4/tman_interface.c:
	(16:45:37) In guess_references we now look for best quality
	"differing" traces against either strand, rather than only
	top-strand. This helps with hets when maybe top & bottom strand
	both get difference base calls. 

2004-10-08  jkbonfield  <jkbonfield>

	* src/gap4/contig_editor.tcl:
	(14:47:16) Added a "show read-pair traces" option to the editor.
	This controls whether the opposite strand trace for this template
	should be automatically shown when invoking the trace display.
	
	Also, for contig_editor.tcl only, added mousewheel support. 

	* src/gap4/edStructs.h,
	* src/gap4/edUtils2.c,
	* src/gap4/tkEditor.c,
	* src/gap4/tman_interface.c:
	(14:47:34) Added a "show read-pair traces" option to the editor.
	This controls whether the opposite strand trace for this template
	should be automatically shown when invoking the trace display.
	
	Also, for contig_editor.tcl only, added mousewheel support. 

	* src/io_lib/progs/convert_trace.c:
	(14:49:06) Fixed a divide-by-zero error in the normalisation code. 

	* src/tk_utils/text_output.c:
	(14:49:46) Better handling of verror/vmessage usage when Tk hasn't
	been initialised. 

	* tables/gaprc:
	(14:50:11) Added mousewheel support. 

	* tables/gaprc_menu_full:
	(14:50:38) Added "Show Read-pair Traces" to the editor settings
	menu. 

2004-10-07  jkbonfield  <jkbonfield>

	* src/mutlib/trace.cpp:
	(16:16:01) Downscale to +/-16384 when differencing traces (instead
	of the previous 32768) as not all displays cope correctly with
	trace samples > 32768. 

	* src/mutlib/align.cpp,
	* src/mutlib/mutscan.cpp,
	* src/mutlib/mutscan_analysis.cpp,
	* src/mutlib/mutscan_preprocess.cpp,
	* src/mutlib/sp_align_lib.cpp,
	* src/mutlib/tracealign.cpp:
	(16:17:16) Removal of debugging information. 

	* src/gap4/tman_diff.c:
	(16:20:19) Changed the Y-scale algorithm to use the normalization
	code from convert_trace. This works much better. 

	* src/gap4/tman_interface.c:
	(16:21:20) If auto-diff is enabled but no negative references have
	been found, we now automatically pick the best discrepant template
	and use that instead. 

	* src/gap4/trace_display.tcl:
	(16:21:51) Shortened the "title" attached to difference traces. 

	* tables/gaprc:
	(16:24:21) Added CONTIG_EDITOR.NAMES_XPOS option to control the
	default scrollbar position in the editor sequence names display. 

	* src/gap4/edUtils2.c:
	(17:16:41) sort_seq_by_template() is now a stable sort. Call
	sort_seq_by_strand prior to calling by template so that sequences
	within a template are now always listed in +/- strand order. 

2004-10-05  jkbonfield  <jkbonfield>

	* src/gap4/contig_editor.tcl:
	(16:10:54) Allow the default editor-names X scrollbar position to
	be set in the gaprc file. 

	* src/gap4/edUtils2.c:
	(16:14:02) The reference sequence is now forced to be top whenever
	the sequences are grouped by anything other than position. (For now
	this cannot be done with group-by-position as this HAS to be sorted
	by position for searches to work correctly.) 

	* src/gap4/tman_interface.c:
	(16:15:16) When auto-diff is enabled but no references have been
	set, gap4 now still always brings up the top and bottom strand
	sequences instead of reverting back to only the trace you
	requested. 

	* src/gap4/trace_display.tcl:
	(16:16:07) When the editor names panel is showing template names
	instead of reading names, the trace display now does the same. 

2004-10-01  jkbonfield  <jkbonfield>

	* src/io_lib/progs/convert_trace.c:
	(10:56:07) Rewrote rescale_heights (the "-normalise" option) using
	an amplitude tracker with an attack & delay model. This seems to
	work well at adjusting for both gradual amplitude variations and
	for downscaling huge dye-blobs. 

2004-09-30  jkbonfield  <jkbonfield>

	* Version:
	(13:52:30) *** empty log message *** 

	* ChangeLog:
	(14:03:44) *** empty log message *** 

	* src/gap4/gap.tcl:
	(14:43:59) Change directory now (via some naughty internal hacking)
	clears the filebrowsers "last rememembered directory". 

	* src/gap4/newgap_cmds.c,
	* src/gap4/readpair.c,
	* src/gap4/template.c:
	(16:17:44) Fixed displaying/listing of template sizes for the
	"<---- .... ---->" case. Previously these could be considered as
	consistent is the ABS(end-start) value was correct, but we now take
	notice of t->direction for working out end-start vs start-end
	instead of using ABS(). 

2004-09-29  jkbonfield  <jkbonfield>

	* src/gap4/allelic_discreps.h:
	(10:35:38) *** empty log message *** 

	* src/gap4/f2c.h:
	(10:38:54) *** empty log message *** 

2004-09-28  jkbonfield  <jkbonfield>

	* src/gap4/acd2tag.tcl:
	(16:28:27) Added "namespaces" into tags. These get converted into
	multiple tabs so that the tag contents can be duplicated up to
	produce subtags within a single tag.
	
	Added text and label data types. 

	* src/gap4/allelic_discreps.c:
	(16:29:31) Main allelic_discreps function now returns a tcl list
	instead of just spewing to stdout. 

	* src/gap4/contig_editor.tcl:
	(16:32:17) Editor sequence-name panel now remembers the X scrollbar
	position between contig editor uses (within a single session).
	
	Experimental "tag popup" system. Currently only suitable for the
	inhouse ExoSeq project and so disabled in the default gaprc.
	
	"Show template names" option to toggle whether reading names or
	template names are shown in the left name panel.
	
	The "Join to" function now attempts to automatically complement a
	contig if required (based on read-pair primer types). 

	* src/gap4/edInterface.c:
	(16:32:46) Addition of edSetTemplateNameMode/edGetTemplateNameMode
	functions. 

	* src/gap4/edStructs.h,
	* src/gap4/edUtils.h,
	* src/gap4/edUtils2.c:
	(16:34:30) Code for toggling the sequence-name and template-name
	shown in the left names panel. 

	* src/gap4/tkEditor.c:
	(16:34:31) Code for toggling the sequence-name and template-name
	shown in the left names panel. 

	* src/gap4/editor_search.tcl:
	(16:35:32) Use of CONTIG_EDITOR.SEARCH.AUTO_EDIT_TAG to determine
	whether a tag search automatically brings up the tag editor to view
	it. 

	* src/gap4/gap.tcl:
	(16:36:02) 4.10b4 

	* src/gap4/newgap_cmds.c:
	(16:36:27) allelic_discreps now returns a Tcl list to the caller
	containing the results. 

	* src/gap4/tagEditor.c,
	* src/gap4/tagU1.c,
	* src/gap4/tagUtils.h,
	* src/gap4/tag_editor.tcl:
	(16:39:26) The edit/create annotation code now returns (from C to
	Tcl) the Tk pathname of the newly created window.
	
	CONTIG_EDITOR.MACRO_AUTOEDIT used to determine whether the tag
	editor should be launched after creation of a tag via a macro.
	
	Bug fix to the GUI tag creation code (tag name vs typeid issues). 

	* src/gap4/tkEdNames.c:
	(16:40:34) The xview method now returns the current slider position
	when no arguments are given. 

	* src/gap4/tkEdUtils.c:
	(16:41:30) Added xx->template_names check to determine whether to
	view sequence or template names. 

	* tables/gaprc,
	* tables/gaprc_menu_full:
	(16:46:09) Various toggles (STRAND_COVERAGE.PROBLEM.VALUE,
	CONTIG_EDITOR.LIST_CONFIDENCE.ONLY_NUM_ERRS) plus new menus/options
	for new features ("show template names" in editor, tag popups for
	ExoSeq project). 

	* tables/shlib.conf:
	(16:46:24) Added linux-ia64 support. 

2004-09-01  jkbonfield  <jkbonfield>

	* src/gap4/extract.c:
	(15:43:51) Fixed a bug where the filenames extracted did not match
	the contents of the file. An extract followed by a directed
	assembly did not reveal problems as the filenames are irrelevant -
	the contents of the filenames were all present still (but in wrong
	files). 

2004-08-17  jkbonfield  <jkbonfield>

	* src/Misc/parse_db.c:
	(13:27:50) Allow backslashes for escaping quotes (and obviously
	therefore also backslashes themselves). 

	* src/gap4/acd2tag.tcl,
	* src/gap4/tag_editor.tcl:
	(13:34:36) Added "gui tags". This uses a hacked copy of the emboss
	acd->tcl conversion code, but specifically it is designed for
	generating gui frames instead of entire top-level windows.
	
	Any tag type with a default-text starting in "#!acdtag:" is
	considered to be in an ACD-like syntax and the default text then
	describes the format instead of the tag text contents. 

	* src/gap4/tclIndex:
	(13:35:16) Added acd2tag::parse lookup 

	* src/io_lib/progs/Makefile,
	* src/io_lib/progs/Makefile.am,
	* src/io_lib/progs/ztr_dump.c:
	(13:37:17) Added a ztr_dump program. 

	* src/mk/global.mk:
	(13:38:02) Fixed the auto-directory making target. 

2004-08-12  jkbonfield  <jkbonfield>

	* src/abi/Makefile,
	* src/abi/getABIfield.c:
	(16:31:14) Complete rewrite of the ABI file reading code so that it
	can now load directly from in-memory structures.
	
	This is within getABIfield.c which is now a general purpose abi
	dump and so replaces all the other getABI* programs. 

2004-08-05  jkbonfield  <jkbonfield>

	* src/gap4/contig_order.tcl:
	(09:20:00) Added missing file for "Order Contigs" code. 

	* src/io_lib/progs/index_tar.c:
	(09:32:05) Fix bug submitted by Steve Leonard. If a directory is
	too large to fit in the name (>100) but short enough to fit in the
	prefix the name field will be empty, this is not the cas for
	ordinary files where the name field is always non-empty. 

2004-07-27  jkbonfield  <jkbonfield>

	* src/mk/global.mk:
	(10:28:13) Binary output directories are now automatically made. 

2004-07-26  jkbonfield  <jkbonfield>

	* src/eba/Makefile,
	* src/eba/conf.c,
	* src/eba/conf.h,
	* src/eba/qual.c:
	(10:45:20) Calibration & make setup changes. 

	* README.build:
	(14:21:46) Added MinGW windows build instructions. 

	* src/Misc/os.h,
	* src/Misc/usleep.c:
	* src/g/g-error.c,
	* src/g/g-error.h,
	* src/g/g-files.c:
	* src/gap4/IO.c,
	* src/gap4/actf.c:
	* src/io_lib/exp_file/expFileIO.c:
	* src/io_lib/include/os.h:
	* src/io_lib/utils/open_trace_file.c:
	* src/mk/windows.mk:
	* src/spin/readpam.c,
	* src/spin/splice_search.c:
	* src/tk_utils/text_output.c,
	* src/tk_utils/tkCanvGraph.c:
	* src/windows/run/Makefile,
	* src/windows/run/main.cpp:
	* tables/iwidgetsrc:
	(14:30:10) MinGW port 

2004-07-23  jkbonfield  <jkbonfield>

	* src/gap4/oligo.c,
	* src/gap4/oligo.h,
	* src/gap4/oligo_param.tcl,
	* src/gap4/tkEditor.c:
	(10:53:51) Added a "prev" button to the contig editor's "select
	primer" interface. 

2004-07-16  jkbonfield  <jkbonfield>

	* src/Misc/vlen.c:
	(10:39:25) Added a va_copy call in vflen for systems where va_list
	is a pointer. The NEED_VA_COPY define comes from the system
	specific bits of os.h 

	* src/Misc/os.h:
	(10:41:28) Define NEED_VA_COPY macro for amd64 systems. (see vlen.c
	for its use) 

2004-07-15  jkbonfield  <jkbonfield>

	* doc/manual/tools/update-nodes:
	(11:38:51) From Gintautas Grigelionis.
	
	Updated the search path for the update-nodes.el script. (uses
	$STADENROOT/manual.) 

	* src/mk/linux.mk:
	(13:02:38) Added comments for alternative options needed on AMD64
	systems. 

	* src/primer3/src/Makefile:
	(13:04:17) Added SHLIB_CFLAGS to the primer3 library building code. 

2004-07-05  jkbonfield  <jkbonfield>

	* src/prefinish/finish_main.c:
	(11:37:13) more diagnostic output on templates: score, consistency,
	flags. 

	* src/prefinish/finish.c:
	(11:38:22) When -no_consensus is true we now still set
	fin->vc->cons. This means that link_vrseq will no longer complain.
	
	Updated version to 1.31 

2004-06-30  jkbonfield  <jkbonfield>

	* lib/tk/bgerror.tcl,
	* lib/tk/button.tcl,
	* lib/tk/choosedir.tcl,
	* lib/tk/clrpick.tcl,
	* lib/tk/comdlg.tcl,
	* lib/tk/console.tcl,
	* lib/tk/dialog.tcl,
	* lib/tk/entry.tcl,
	* lib/tk/focus.tcl,
	* lib/tk/listbox.tcl,
	* lib/tk/listbox.tcl.orig,
	* lib/tk/menu.tcl,
	* lib/tk/mkpsenc.tcl,
	* lib/tk/msgbox.tcl,
	* lib/tk/obsolete.tcl,
	* lib/tk/optMenu.tcl,
	* lib/tk/palette.tcl,
	* lib/tk/palette.tcl.orig,
	* lib/tk/panedwindow.tcl,
	* lib/tk/safetk.tcl,
	* lib/tk/scale.tcl,
	* lib/tk/scrlbar.tcl,
	* lib/tk/spinbox.tcl,
	* lib/tk/tearoff.tcl,
	* lib/tk/Attic/tearoff.tcl.orig,
	* lib/tk/text.tcl,
	* lib/tk/tk.tcl,
	* lib/tk/tkfbox.tcl,
	* lib/tk/tkfbox.tcl.orig,
	* lib/tk/unsupported.tcl,
	* lib/tk/xmfbox.tcl,
	* lib/tk/xmfbox.tcl.orig:
	(14:29:29) Updated to use Tk8.4.6.
	
	Reapplied local patches to listbox.tcl, palette.tcl, tkfbox.tcl and
	xmfbox.tcl. Local patch to tearoff.tcl is no longer needed (it made
	it into the core dist.) 

	* lib/tk/images/README,
	* lib/tk/msgs/fr.msg,
	* lib/tk/msgs/nl.msg:
	(14:29:45) Updated to use Tk8.4.6.
	
	Reapplied local patches to listbox.tcl, palette.tcl, tkfbox.tcl and
	xmfbox.tcl. Local patch to tearoff.tcl is no longer needed (it made
	it into the core dist.) 

2004-06-29  jkbonfield  <jkbonfield>

	* src/gap4/gap_hash.c:
	(12:56:51) Find Repeats now depads the sequence first. (Func
	repeat_search) 

2004-06-24  jkbonfield  <jkbonfield>

	* src/gap4/gap_nav.tcl:
	(14:12:56) Fixed the Save button. 

	* src/gap4/dis_readings.c:
	(15:56:06) Improved text output to indicate both left and right
	contig ends where known while splitting. 

	* src/gap4/break_contig.c:
	(15:56:07) Improved text output to indicate both left and right
	contig ends where known while splitting. 

	* src/gap4/tag_editor.tcl,
	* src/gap4/tclIndex:
	(16:13:34) Removed the add_tag_menus function. 

	* src/gap4/contig_editor.tcl:
	(16:16:31) The editor 'edit tag' and 'delete tag' sub-menus now
	auto-cascade when there are too many tags visible at one point. 

2004-06-23  jkbonfield  <jkbonfield>

	* src/gap4/template.c,
	* src/gap4/template.h:
	(10:12:01) Added TEMP_CONSIST_INTERDIST as a type of error
	indicating that the size constraint on a template has been broken
	when we attempt to butt contigs against one another (working on the
	assumption that any valid overlap would have been made already).
	The TEMP_OFLAG_INTERDIST flag can be set to enable this search to
	be made (which is off by default; previously it was enabled and
	produced CONSIST_DIST errors).
	
	Added template_check_set_flags() function to ease setting a flag
	for all templates in the template_c array. 

	* src/gap4/edUtils2.c:
	(10:14:35) Added TEMP_OFLAG_INTERDIST flag to template_c structs.
	Necessitated by the change in template.c in order to keep behaviour
	in edUtils2.c the same as the previous revision. 

	* src/gap4/template_display.c:
	(10:17:02) Added comment about using TEMP_OFLAG_INTERDIST. It's not
	enabled here, but this means it has an operation different to the
	previous version (as template.c has changed, not this file). 

	* src/gap4/edInterface.c:
	(10:18:06) Splitted the template status code "D" into "D" and "d".
	Uppercase indicates impossible distance issues (ie negative size)
	and lowercase indicates less severe out of range sizes. 

2004-06-22  jkbonfield  <jkbonfield>

	* src/gap4/join.c:
	(09:04:17) Check for the alignment buffer introducing more pads
	than the sequence length dictates there should be. This was causing
	read-past-end of buffer (depad_to_pad[]) in some rare cases and
	hence causing the join editor align button to hang or crash. 

	* src/gap4/join.c:
	(09:28:05) Join editor "Align" button output now trims the right
	hand alignment edge (for runs of pads) in addition to left end. 

2004-06-16  jkbonfield  <jkbonfield>

	* src/gap4/io-reg.c:
	(13:46:57) Improved debug info to log file. 

	* src/gap4/confidence_graph.h,
	* src/gap4/confidence_graph.tcl,
	* src/gap4/newgap_cmds.c:
	(13:48:45) Added new graph types and added the allelic_discreps Tcl
	binding (meant to be in last update, but missed). 

2004-06-15  jkbonfield  <jkbonfield>

	* src/eba/Makefile,
	* src/eba/conf.c,
	* src/eba/conf.h,
	* src/eba/qual.c:
	(08:28:55) Added secondary phred-scale lookup table from
	callibration of new confidence assignment mode. 

	* src/gap4/contig_selector.tcl:
	(15:56:41) Added a catch around a visibility wait as in some cases
	it errors. Unknown why! 

	* src/gap4/edUtils.h,
	* src/gap4/edUtils2.c,
	* src/gap4/qualIO.c,
	* src/gap4/vseqs.c:
	(15:58:53) Added template to the gel_info query. 

	* src/gap4/gap_nav.tcl:
	(16:00:06) Added a visual cue of the contig length and the match
	position within that contig. 

	* src/gap4/Makefile,
	* src/gap4/allelic_discreps.c,
	* src/gap4/confidence_graph.c,
	* src/gap4/qual.c,
	* src/gap4/qual.h:
	(16:08:27) New discrepancy calculations and plots computed via
	calc_consensus and calc_discrepancies. The second-highest
	confidence may be returned from calc_consensus() if cons2 is passed
	as NULL but qual2 is not. This is plotted via the 2nd-highest
	confidence graph.
	
	A new function calc_discrepancies(), based on calc_consensus,
	computes the second highest confidence value at each base position
	along with an estimation of how likely it is that we have two
	haplotypes fitting a 50/50 ratio.
	
	The allelic_discreps function (currently exported to Tcl, but with
	no user interface) uses calc_discrepancies to attempt to pull apart
	an assembly mixed from two haplotypes. 

	* src/gap4/Makefile:
	(16:40:37) Rewrote all calls to the FORTRAN WRITE() call from
	legacy.f as SWRITF() instead. This is our own function (in f2c.c)
	designed to act much like a printf style command. The purpose of
	this is to allow f2c generated code (legacy_f2c.c) to work without
	needing any of the fortran run-time library and hence make building
	on platforms without a fortran compiler substantially easier to do. 

	* src/gap4/f2c.c,
	* src/gap4/legacy.f,
	* src/gap4/legacy_f2c.c:
	(16:40:38) Rewrote all calls to the FORTRAN WRITE() call from
	legacy.f as SWRITF() instead. This is our own function (in f2c.c)
	designed to act much like a printf style command. The purpose of
	this is to allow f2c generated code (legacy_f2c.c) to work without
	needing any of the fortran run-time library and hence make building
	on platforms without a fortran compiler substantially easier to do. 

	* src/gap4/quality_plot.c:
	(16:42:58) Replaced fmtdb_ in fortran with a local fmtdb, to avoid
	requirements of fortran WRITE() call. 

	* src/gap4/tagEditor.c:
	(16:43:50) Add tag pointer into Tk window pathname. It's a hack,
	but it means that multiple tags with tagid 0 (newly created ones)
	can be edited without clashes. 

	* src/tk_utils/tkTrace.c:
	(16:44:35) Fixed error message for TraceCmd. 

	* tables/gaprc_menu_full:
	(16:46:44) Added new consistency/confidence graph menu items. 

	* tables/trevrc:
	(16:47:36) Use trace "orig_format" instead of "format" widget
	command when determining type to save under. This means that we can
	edit and save back to experiment files once more (ie fixes a bug). 

2004-06-14  jkbonfield  <jkbonfield>

	* src/gap4/do_fij.c:
	(16:19:00) Improved the cryptic warning messages output by FIJ. 

2004-06-09  jkbonfield  <jkbonfield>

	* src/eba/conf.c,
	* src/eba/qual.c:
	(17:30:48) Added various command line options to turn on/off
	averaging and to turn on a "filtered" method of calling confidence
	values. Enabling both this and the old method takes the minimum of
	either in a "pessimistic" approach. 

2004-06-02  jkbonfield  <jkbonfield>

	* tables/gaprc:
	(14:11:52) Added gui component/defaults for "ignore svec clips" in
	directed assembly. 

	* src/gap4/assemble_direct.c:
	(14:15:25) Added an "ignore svec (SL/SR) clips" option to directed
	assembly. The default behaviour (not ignore) is how the 2003 staden
	package worked, but not 1.4 and 1.4.1. 

	* src/gap4/assemble_direct.h,
	* src/gap4/assemble_direct.tcl,
	* src/gap4/newgap_cmds.c,
	* src/gap4/newgap_structs.h:
	(14:15:29) Added an "ignore svec (SL/SR) clips" option to directed
	assembly. The default behaviour (not ignore) is how the 2003 staden
	package worked, but not 1.4 and 1.4.1. 

2004-06-01  jkbonfield  <jkbonfield>

	* src/io_lib/CHANGES,
	* src/io_lib/Makefile.am,
	* src/io_lib/Makefile.in,
	* src/io_lib/README,
	* src/io_lib/config.guess,
	* src/io_lib/config.h.in,
	* src/io_lib/config.sub,
	* src/io_lib/configure,
	* src/io_lib/configure.in,
	* src/io_lib/depcomp,
	* src/io_lib/install-sh,
	* src/io_lib/ltmain.sh,
	* src/io_lib/missing,
	* src/io_lib/mkinstalldirs:
	(08:54:43) Updated notes to claim this is version 1.8.12 and
	rebuilt all the automake/autoconf/libtool generated files. 

	* src/io_lib/abi/Makefile.in,
	* src/io_lib/alf/Makefile.in:
	(08:54:50) Updated notes to claim this is version 1.8.12 and
	rebuilt all the automake/autoconf/libtool generated files. 

	* src/io_lib/ctf/Makefile.in,
	* src/io_lib/exp_file/Makefile.in,
	* src/io_lib/plain/Makefile.in,
	* src/io_lib/progs/Makefile.am,
	* src/io_lib/progs/Makefile.in,
	* src/io_lib/read/Makefile.in,
	* src/io_lib/scf/Makefile.in,
	* src/io_lib/utils/Makefile.in,
	* src/io_lib/ztr/Makefile.in:
	(08:54:51) Updated notes to claim this is version 1.8.12 and
	rebuilt all the automake/autoconf/libtool generated files. 

2004-05-24  jkbonfield  <jkbonfield>

	* src/gap4/oligo.c:
	(08:42:47) Improved information added to oligo tags: now has Tm,
	GC, quality. 

	* src/gap4/edInterface.c:
	(08:53:13) Add force_comment call to edSetBriefTag(), meaning that
	tag searches now update the information line correctly. 

2004-05-21  jkbonfield  <jkbonfield>

	* src/gap4/contig_editor.tcl:
	(15:54:14) Added keybindings to use XF86_Switch_VT_1 in addition to
	Shift-Key-F1 (and so on) as this appears to be how the newer
	XFree86 default xmodmap is configured.
	
	Unfortunately XF86_Switch_VT_1 is only in XFree86's keysymdb,
	meaning that using a linux xserver and a (for example) digital unix
	client will still work as Gap4 on digital unix cannot bind to an
	unknown keysym. 

2004-05-13  jkbonfield  <jkbonfield>

	* src/io_lib/abi/seqIOABI.c:
	(16:14:10) Improved spacing fix. 

2004-05-12  jkbonfield  <jkbonfield>

	* src/io_lib/abi/seqIOABI.c:
	(08:27:40) Applied change suggested by Saul A. Kravitz. The
	fallback fspacing is now calculated over the range that basecalls
	exist rather than the total length of trace. 

	* src/gap4/contigEditor.c:
	(13:35:43) Fixed incorrect repositioning of the editor window when
	new plots were brought up. Caused due to the CONTIG_REG
	notification triggering a CURSOR_NOTIFY event using the editor
	internal sequence number instead of the external reading number. 
2004-05-11  James Bonfield  <jkb>

	* tables/gaprc:
	Set the default Sequence Search percentage match to be 100% (was
	75%).

	* src/trev/trev.tcl:
	Version 1.8b1.
	Use trace "orig_format" command instead of "format" for working
	out if the trace is experiment file or not. This corrects a bug
	caused by the io_lib change of 2004-01-13 whereby EXP files were
	considered to be in the format of the trace file they referenced
	by trev and hence could not be saved to.

	* src/tk_utils/xyesno.tcl:
	Improving packing layout.
	
	* src/tk_utils/tkTrace.c:
	Added an "orig_format" widget command.

	* src/gap4/configure.tcl,
	* src/gap4/gap.tcl,
	* src/gap4/gap_globals.c,
	* src/gap4/gap_globals.h,
	* src/gap4/tclIndex:
	(08:42:13) More template check parameters are now exposed to the
	user via the Configure menu. Specifically this includes what data
	we filter out as possibly incorrect (prime type; all or just
	custom) and the minimum length of vector SVEC tags before we
	consider them to be valid. (Both are in template.c already, but
	previously only controlled programatically.) 

	* src/gap4/template.c,
	* src/gap4/template.h:
	(08:43:10) Corrected OFLAG flags so that they are proper
	bit-patterns rather than 'overlapping' each other causing bugs. 

	* tables/gaprc:
	(08:44:28) Added default definitions for the new template status
	checking options. 

	* tables/gaprc_menu_full:
	(08:44:54) Renamed the template size tolerance function to
	something more appropriate. 

	* src/gap4/contig_editor.tcl:
	(08:46:23) Added a "Join to..." menu to the editor names panel.
	This brings up a join editor between the current sequence and the
	one linked to (provided they are in different contigs). 

	* staden.login,
	* staden.profile:
	(10:24:56) Updated the MANPATH handling to use the "manpath"
	command where available for finding the default. 

	* src/gap4/find_oligo.c:
	(12:28:00) SF Bug #914027. The sequence search now honours the
	start/end ranges. 

2004-05-07  jkbonfield  <jkbonfield>

	* src/Makefile:
	(13:10:58) xrelink target to do the same as relink, in case relink
	is overloaded elsewhere. 

	* src/gap4/contig_editor.tcl:
	(13:12:36) Reenabled the Any-Configure binding once more. It
	probably breaks resizing in some cases, but without it twm was
	giving zero sized windows.
	
	One day... one day, I'll finally get around to rewriting this mess! 

	* src/gap4/gap.tcl:
	(13:13:29) Improved usage messages and error messages when DISPLAY
	not set.
	
	Updated version to 4.10b2 

	* src/gap4/template.c,
	* src/gap4/template.h:
	(13:16:55) Added a minimum length of vector (min_vector_len) to
	consider as valid, in order to ignore a few base pairs erroneously
	tagged at the end of sequences due to random matches. (This is a
	bug in vector clipping programs, but it happens often.)
	
	Added a TEMP_OFLAG_IGNORE_PTYPE flag so that the primer type
	information can be completely ignored when trying to work out
	template positions. Instead it relies purely on the location of
	sequences and vector tags. This is to work around databases with
	incorrectly entered data. 

	* src/mk/global.mk:
	(13:18:45) Edited TEXTUTILS_LIB definition to have TEXTUTILS_LIB_E
	at the end, rather than second to end. 

	* src/prefinish/finish_filter.c:
	(14:44:53) Renamed key_t to fkey_t to avoid conflicts under MinGW. 

	* src/prefinish/finish_hash.c:
	(15:24:19) Reduced the spamminess of the best oligo match output by
	only printing up failed ones. 

	* src/prefinish/finish_long.c:
	(15:25:56) Added extra min_vector_len parameter into
	finish_clip_svec call. 

	* src/prefinish/finish_main.c:
	(15:28:20) Check for the new -penalise_overlaps option.
	
	Set TEMP_OFLAG_IGNORE_PTYPE flag the template struct before
	checking for validity if -chk_template_stat == 0. Pass over the
	-min_vector_len parameter too. 

	* src/prefinish/finish_sanger.tcl:
	(15:29:13) Extended the -ends only mode to give scores for
	improving low quality, even though it still only tries to extend
	contigs. Added a -regexp_templates 1 option to switch back to the
	previous default mechanism. 

	* src/prefinish/finish_utils.c:
	(15:30:23) Make use of the -min_vector_len option in the
	find_cloning_cector and finish_svec_clip functions. 

	* src/prefinish/finish_utils.h:
	(15:30:39) Make use of the -min_vector_len option in the
	find_cloning_cector and finish_svec_clip functions. 

	* src/prefinish/finish_walk.c:
	(15:35:06) Decreased the impact of primer3 scores on the
	'cost_mult' parameter. It's now *= 1+score/50 instead of *=
	1+score/20.
	
	When -chk_template_stat == 0 we now set the template ranges to be
	the observed location of vector +/- 1Kb.
	
	"Solution not adjoining problem end" is now multiplicative in cost
	rather than additive.
	
	Tweaks for start location of where to search for primers when we're
	trying to solve a + strand problem from the right end (ie the left
	end failed) and where start != end. We back up from the requested
	pos by half a read length. 

	* src/scripts/embl2exp:
	(16:25:26) New script: a quick hack to convert EMBL to EXP by using
	a gap4 database as an intermediate format. 

2004-04-28  jkbonfield  <jkbonfield>

	* src/seq_utils/search_utils.c:
	(09:21:45) Fixed a 'read past buffer end' bug in pstrstr and
	pstrstr_inexact, leading to possible crashes, but more likely to
	false matches being reported.
	
	The problem occured when 'text' ended in a pad. 

2004-04-26  James Bonfield  <jkb>

	* src/gap4/gap.tcl:
	Update version to 4.10b2

2004-04-23  James Bonfield  <jkb>

	* src/gap4/newgap_cmds.c:
	Added a -quality option to the quality_clip_reads option.

	* src/gap4/contig_editor.tcl:
	New template colour definition (-tmplcolour5) to match the
	spanning template status.

	* src/gap4/copy_db.c:
	Added a copy_read_name() function. This now handles duplicate
	readings by renaming them.

2004-04-23  jkbonfield  <jkbonfield>

	* src/gap4/notes.c:
	(10:38:24) Fixed a 1024 byte limitation on the RAWD note. 

2004-04-21  jkbonfield  <jkbonfield>

	* src/gap4/configure.tcl:
	* src/gap4/gap.tcl:
	* src/gap4/gap_globals.c,
	* src/gap4/gap_globals.h,
	* src/gap4/tclIndex,
	* src/gap4/template.c:
	* src/gap4/template_display.tcl:
	* tables/gaprc_menu_full:
	(13:29:51) Renamed the term 'template size strictness' to 'template
	size tolerance' to reflect the fact that larger numbers mean less
	strict. 

	* tables/gaprc:
	(13:30:25) Added TEMPLATE_TOLERANCE as a configuration parameter so
	that users may adjust the default from 1.0. 

	* tables/gaprc:
	(13:54:03) Changed the primer3 Tm settings back to their previous
	ranges. These are probably inappropriate for the PCR dialogue, but
	I'll tackle that later (with a different set of parameters
	perhaps). 

2004-04-20  jkbonfield  <jkbonfield>

	* src/gap4/clip.c:
	(16:23:35) Updated the quality_clip_ends function to output using
	vmessage() instead of printf. 

	* tables/gaprc:
	(17:01:05) Added editor colour for spanning template 

	* src/gap4/contigEditor.c,
	* src/gap4/edStructs.h:
	(17:03:27) Added a new colour code and status for templates in the
	editor. "Spanning" templates now have the status "O" ("O"ther
	contig). Templates that are spanning and have only one end-read
	present are shown with a pink block. Currently spanning templates
	where both-ends are present and correct are still shown in the "Ok"
	colour, although the text code still lists "O". 

	* src/gap4/edUtils2.c:
	(17:03:28) Added a new colour code and status for templates in the
	editor. "Spanning" templates now have the status "O" ("O"ther
	contig). Templates that are spanning and have only one end-read
	present are shown with a pink block. Currently spanning templates
	where both-ends are present and correct are still shown in the "Ok"
	colour, although the text code still lists "O". 

	* src/gap4/edInterface.c,
	* src/gap4/tkEdUtils.c,
	* src/gap4/tkEditor.c,
	* src/gap4/tkEditor.h:
	(17:03:29) Added a new colour code and status for templates in the
	editor. "Spanning" templates now have the status "O" ("O"ther
	contig). Templates that are spanning and have only one end-read
	present are shown with a pink block. Currently spanning templates
	where both-ends are present and correct are still shown in the "Ok"
	colour, although the text code still lists "O". 

2004-04-19  jkbonfield  <jkbonfield>

	* src/mk/alpha.mk:
	(11:24:56) Added F77_DEP so that gap4sh compiles. 

	* tables/checked.gif,
	* tables/unchecked.gif:
	(12:58:00) Added missing image files for the PCR primer picking
	code. 

	* src/gap4/pcr_primers.tcl:
	(12:58:26) Moved location of checked/unchecked gif images to
	$STADTABL. 

	* tables/Makefile:
	(12:59:20) Added *.gif to the list of extensions to copy using make
	dist. 

2004-04-16  jkbonfield  <jkbonfield>

	* src/gap4/restriction_enzymes.c:
	(16:15:34) The correct fragment size is now listed between mouse
	clicks in the plot. 

	* src/gap4/stop_codon.c:
	(16:16:22) Stop codons are now spotted when they contain pads
	within the codon. The reading frame no longer changes due to pads
	either. 

	* src/seq_utils/dna_utils.c,
	* src/seq_utils/dna_utils.h:
	(16:17:12) Added iubc_word_match_padded() for use with the depadded
	stop codon plot. 

	* src/seq_utils/renz_utils.c:
	(16:18:27) Added hash_seq4_padded() to hash on word length 4 in
	data containing pads. This was created for the gap4 stop-codon plot
	updates and it pretty much works OK, but in the end I decided not
	to use it. 

	* src/tk_utils/restriction_enzyme_map.c:
	(16:19:11) Added an unpadded_cut_site parameter to PlotStickMap.
	Required by the gap4 restriction enzyme plot changes. 

	* src/tk_utils/restriction_enzyme_map.h:
	(16:19:27) Added an unpadded_cut_site parameter to PlotStickMap.
	Required by the gap4 restriction enzyme plot changes. 

	* src/tk_utils/tkSheet_common.c,
	* src/tk_utils/tkSheet_struct.h:
	(16:21:22) Added a 'grid' member of the sheet widget to control
	whether Tk_SetGrid should be used. This allows us to only specify
	one widget to be controlling the grid within a toplevel (which is
	supposedly required by Tk, despite the fact that we've used 2
	within the contig editor for ages). 

	* src/gap4/contig_editor.tcl,
	* src/gap4/tkEditor.c:
	(16:24:00) Disabled "gridding" (resizing in steps quantised to the
	font size) within the editor and adjusted the Any-Configure event
	handler.
	
	This means that the editor can now display half a character, or
	that the vertical scrollbar grows/shrinks to fit in an exact number
	of characters.
	
	However it does cure some horrible resizing bugs when running on
	RedHat9 using metacity (I believe the problem is with metacity, not
	redhat9 or gap4) and generally resizing has been buggy for a long
	while. Hopefully this produces fewer problems than it solves. 

2004-04-14  James Bonfield  <jkb>

	* src/gap4/dis_readings.c (disassemble_readings): 
	Removed a database corruption caused when a reading is removed
	from the database (not just moved) and then no subsequent write of
	the main GT_Database record is performed.

2004-04-13  jkbonfield  <jkb>

	* src/g/g-files.c:
	(10:32:26) Updated comments regarding MMAP speed tests 

	* src/mutlib/Makefile:
	(10:42:55) CFLAGS vs CXXFLAGS name 

	* src/mutscan/main.cpp:
	(10:43:29) Include <string.h> for Solaris C++ 

	* src/prefinish/finish_cDNA:
	(10:44:44) Changed default filtering options 

	* src/prefinish/finish_sanger.tcl:
	(10:47:19) Change to reflect local sanger ntemplates used (3 to 2). 

	* src/scripts/assemble4:
	(10:48:52) Remove -f in "stash -f" 

	* src/gap4/configure.tcl:
	(10:55:28) Added a template strictness option. This controls how
	far outside the min-max template size a template can be before
	being flagged as inconsistent 

	* src/gap4/gap_globals.c,
	* src/gap4/gap_globals.h,
	* src/gap4/tclIndex,
	* src/gap4/template.c:
	(10:55:29) Added a template strictness option. This controls how
	far outside the min-max template size a template can be before
	being flagged as inconsistent 

	* tables/gaprc_menu_full:
	(10:56:18) Menu items for the new template strictness function and
	the gap4 PCR interface. 

	* tables/gaprc:
	(10:57:31) Added definitions for gap4 PCR interface, changed the
	default primer picking parameters, added the colour for the
	"ends-not-present" template staus in the editor, and the 'do not
	show inconsistent templates' template display option. 

	* src/gap4/template_display.c,
	* src/gap4/template_display.h,
	* src/gap4/template_display.tcl:
	(10:58:55) Added an option to turn off display of inconsistent
	templates. 

	* src/gap4/contigEditor.c,
	* src/gap4/contig_editor.tcl,
	* src/gap4/edInterface.c,
	* src/gap4/edStructs.h,
	* src/gap4/edUtils2.c,
	* src/gap4/tkEdUtils.c,
	* src/gap4/tkEditor.c,
	* src/gap4/tkEditor.h:
	(11:00:54) A new template status code (E) and colour have been
	added. This shows when a template is consistent, but one or both
	"end sequences" are not present and so the position has not been
	experimentally verified. 

	* src/gap4/editor_search.tcl:
	(11:01:35) Made raising of the search window option. The new
	bindings in contig_editor.tcl no longer raise the window when page
	up/down is used. 

	* src/gap4/vseqs.c:
	(11:02:25) Initialise the GReadings structures and vseq_t
	structures. (Bug fix for uninitialised data.) 

	* src/prefinish/finish_long.c:
	(11:02:34) Initialise the GReadings structures and vseq_t
	structures. (Bug fix for uninitialised data.) 

	* src/prefinish/finish_reverse.c:
	(11:02:35) Initialise the GReadings structures and vseq_t
	structures. (Bug fix for uninitialised data.) 

	* src/gap4/pcr_primers.tcl:
	(11:03:24) Gap4 GUI to the prefinish code to pick PCR primers
	between contig ends. Preliminary version. 

	* src/prefinish/Makefile,
	* src/prefinish/finish.c,
	* src/prefinish/finish.h,
	* src/prefinish/finish_pcr.c,
	* src/prefinish/finish_pcr.h:
	(11:04:32) Added interface to using primer3 for PCR picking;
	initially just between contig ends. 

	* src/prefinish/finish_filter.c,
	* src/prefinish/finish_filter.h:
	(11:05:18) Generalised the filter functions to work on any sequence
	rather than hand-coded members of the finish_t structure. Used by
	the new PCR picking code. 

	* src/prefinish/finish_utils.c,
	* src/prefinish/finish_utils.h,
	* src/prefinish/finish_walk.c:
	(11:05:45) Moved score_match2() from finish_walk.c to
	finish_utils.c and renamed to secondary_primer_match(). 

	* tables/NOTEDB:
	(11:06:28) Created a new note type FAKE. This is used in the
	prefinishing system to mark sequences that should not contribute to
	strand analysis (eg consensus sequences). 

	* src/prefinish/finish_main.c:
	(11:06:29) Created a new note type FAKE. This is used in the
	prefinishing system to mark sequences that should not contribute to
	strand analysis (eg consensus sequences). 

	* src/tk_utils/help_choose.tcl,
	* src/tk_utils/help_galeon.tcl,
	* src/tk_utils/help_netscape.tcl:
	(11:07:19) Added more options for the web browser to use for online
	help. Konqueror, mozilla and galeon are now supported. 

2004-04-08  jkbonfield  <jkb>

	* src/gap4/ng_fb_cmds.tcl:
	(10:17:11) Honour the no_csel command line option when opening new
	databases via File->Open 

	* src/gap4/gap.tcl:
	(10:31:48) The default position for the main window when starting
	up gap4 with a database specified on the command line is now
	underneath the contig selector window. 

	* src/mk/linux.mk:
	(10:34:08) Changed gcc/g++/g77 names to exclude the version number
	(suggestion by Joe Burks). 

	* src/Misc/misc.h:
	(10:42:22) Surround getopt prototype with ifdef _MSC_VER. (Joe
	Burks) 

	* mklinks:
	(10:48:11) Added link in scripting_manual to ../manual/tools. Added
	explicit "." as the destination for ln as SGI ln does not accept
	this as a default. 

	* doc/manual/tools/make_ps:
	(10:53:32) Changed the default location of 'convert' program. We
	still specify the full path to avoid confusion with the staden
	package 'convert' tool. (idea from Joe Burks) 

	* doc/manual/tools/edit_mini_contents.pl:
	(10:54:14) Changed default location of perl to /usr/bin/perl (idea
	from Joe Burks) 

	* doc/manual/tools/html_index.pl,
	* doc/manual/tools/merge_indexes.pl,
	* doc/manual/tools/remove_xrefs.pl,
	* doc/manual/tools/texi2html,
	* doc/manual/tools/texi2man.pl,
	* doc/manual/tools/xref_update.pl:
	(10:54:15) Changed default location of perl to /usr/bin/perl (idea
	from Joe Burks) 

	* course/texi/Makefile:
	(14:35:25) Changed @tick{} and @cross{} macros for m4 _tick() and
	_cross() implementations. This avoids the need for makeinfo and
	hence also avoids problems with no .txt copies of images. 

	* course/texi/course.texi,
	* course/texi/exercise1.texi,
	* course/texi/header.m4:
	(14:35:26) Changed @tick{} and @cross{} macros for m4 _tick() and
	_cross() implementations. This avoids the need for makeinfo and
	hence also avoids problems with no .txt copies of images. 

2004-04-06  jkbonfield  <jkb>

	* src/gap4/oligo.c,
	* src/gap4/tkEditor.c:
	(11:30:47) Added a createTmpAnnotation function and a
	create_tmp_anno editor subcommand to utilise it. This is used for
	displaying fake annotations (eg it was previously done via C-only
	in the "suggest primers" option of the contig editor). 

	* src/gap4/oligo_param.tcl:
	(11:33:18) Cosmetic changes to the "edit oligo parameters"
	dialogue. 

	* src/gap4/primlib.c,
	* src/gap4/primlib.h:
	(11:35:05) Added "num_return" as a configurable (from tcl) primlib
	parameter.
	
	Added primlib_choose_pcr function. 

2004-03-30  jkbonfield  <jkb>

	* src/gap4/consen.c:
	(08:56:23) Allow ambiguity codes to be written to FASTA files. Not
	technically correct according to the original fasta spec, but no
	one seems to care about that these days. 

	* src/gap4/actf.c:
	(09:07:24) Moved a declaration to the start of a block (as it was
	an accidental C++ism). 

	* src/gap4/find_oligo.c:
	(09:08:28) Moved inexact_pad_match function to earlier in file to
	avoid missing prototype complaints. 

	* src/gap4/gap_utils.tcl:
	(09:09:15) Cosmetic formatting change. 

	* src/gap4/template.c:
	(09:10:03) Moved "int length" to start of block to avoid C++ism. 

	* src/gap4/tkEdUtils.c:
	(09:11:50) Added _select_region function (which should have been
	checked in with the last round of editor updates). 

2004-03-22  jkbonfield  <jkb>

	* src/tk_utils/html_library.tcl:
	(11:25:37) Removed the focus hack which broke when tk was updated
	to 8.4 (it gave rise to an infinite recursion). 

	* src/tk_utils/help_choose.tcl,
	* src/tk_utils/tclIndex:
	(11:26:33) Changed how the help mechanism is chosen. 

	* src/pregap4/gui.tcl,
	* src/trev/trev.tcl:
	(11:27:53) Removed the 'beta' component of the program version
	number. 

	* ChangeLog:
	(11:35:15) *** empty log message *** 

2004-03-15  jkbonfield  <jkb>

	* src/gap4/newgap_cmds.c:
	(16:08:01) Added tcl interface to the list_base_confidence command. 

	* src/gap4/qualIO.c,
	* src/gap4/qualIO.h:
	(16:10:02) New functions for producing distributions of phred
	scores for bases that match and mismatch the consensus sequence.

	* src/gap4/qual.tcl,
	* src/gap4/tclIndex:
	(16:10:40) Tcl dialogue for the list base confidence command 

	* tables/gaprc_menu_full:
	(16:12:40) Added List Base Confidences to view menu. 

2004-03-12  jkbonfield  <jkb>

	* src/gap4/edUtils.h,
	* src/gap4/edUtils2.c:
	(12:00:13) Added an interface to editor_select_region. This marks
	(underlines) a selection, for visual view and for use with create
	tag etc. 

	* src/gap4/find_oligo.c:
	(12:01:27) Matches displayed in the editor are now automatically
	selected, for faster tagging.
	
	The search by tags mode now also matches in padded sequence. 

2004-03-11  jkbonfield  <jkb>

	* src/gap4/find_oligo.c:
	(11:57:05) Fixed a buffer overflow (and general inefficiency) in
	calling the depadding code. 

2004-03-10  jkbonfield  <jkb>

	* src/gap4/qual.c:
	(14:07:34) Added a consensus consistency quality array (in qual2)
	for the bayesian consensus algorithm. This is designed to indicate
	likely alignment conflicts. 

	* src/gap4/confidence_graph.c,
	* src/gap4/confidence_graph.h,
	* src/gap4/confidence_graph.tcl,
	* tables/gaprc_menu_full:
	(14:09:59) Added consensus discrepancy as a plot type in the
	"consistency display". This uses the new discrepancy part of the
	consensus algorithm. 

	* src/gap4/consistency_display.h:
	(14:10:56) Added consensus discrepancy as a plot type in the
	"consistency display". This uses the new discrepancy part of the
	consensus algorithm. 

	* src/gap4/edUtils.h,
	* src/gap4/edUtils2.c,
	* src/gap4/editor_search.tcl,
	* src/gap4/searchUtils.c,
	* tables/gaprc:
	(14:12:48) New editor search mode: search by consensus discrepancy 

	* src/gap4/newgap_cmds.c:
	(14:13:25) Added consensus discrepancy as a plot type in the
	"consistency display". This uses the new discrepancy part of the
	consensus algorithm. 

	* src/gap4/tclIndex:
	(14:14:49) Exported InputSelectReadingList and added "Highlight
	reading list" on to the main Lists menu. 

	* src/gap4/list_contigs.tcl:
	(14:16:48) Renamed "save" to "save order" to avoid confusion with
	saving the list itself to disk. 

2004-03-05  jkbonfield  <jkb>

	* tables/gaprc,
	* tables/gaprc_menu_full:
	(12:42:02) Added a new option to allow the highlight disagreements
	mode to be filtered by base quality. 

	* src/gap4/contig_editor.tcl,
	* src/gap4/edInterface.c,
	* src/gap4/edStructs.h,
	* src/gap4/edUtils.h,
	* src/gap4/edUtils2.c,
	* src/gap4/tkEdUtils.c,
	* src/gap4/tkEditor.c:
	(12:42:20) Added a new option to allow the highlight disagreements
	mode to be filtered by base quality. 

2004-03-04  jkbonfield  <jkb>

	* src/prefinish/finish.c,
	* src/prefinish/finish.h,
	* src/prefinish/finish_main.c:
	(16:33:39) Added -no_filter and -no_consensus options for
	optimising picking of only resequences (where dust and consensus is
	not needed).
	
	Also moved the regexp #ifdef for processing the skip_templates and
	avail_templates files to be a run-time option (-regexp_templates). 

2004-03-03  jkbonfield  <jkbonfield>

	* src/gap4/IO.c:
	(14:54:03) Recent fix to open_db broke creation of new databases.
	Now check that the failure code from access() is EACCES and not
	ENOENT. 

	* src/mutlib/Makefile,
	* src/mutlib/align.cpp,
	* src/mutlib/array.hpp,
	* src/mutlib/caller.cpp,
	* src/mutlib/list.hpp,
	* src/mutlib/matrix.hpp,
	* src/mutlib/mutationtag.cpp,
	* src/mutlib/mutscan.cpp,
	* src/mutlib/mutscan_analysis.cpp,
	* src/mutlib/mutscan_helper.cpp,
	* src/mutlib/mutscan_preprocess.cpp,
	* src/mutlib/muttag.cpp,
	* src/mutlib/parameter.hpp,
	* src/mutlib/sp_align_lib.cpp,
	* src/mutlib/sp_matrix.cpp,
	* src/mutlib/stringlist.cpp,
	* src/mutlib/trace.cpp,
	* src/mutlib/trace.hpp,
	* src/mutlib/tracealign.cpp,
	* src/mutlib/tracealign_helper.cpp,
	* src/mutlib/tracediff.cpp:
	(17:02:25) Updates to work with "Compaq C++ V6.5-035".
	Specifically: Use <locale> instead of <cctype> for toupper. Use
	assert(pointer != NULL) instead of assert(pointer). 

	* src/mutscan/Makefile:
	(17:03:09) Added Tk to link line. 

	* src/mutscan/main.cpp,
	* src/mutscan/stringlist.cpp:
	(17:04:03) Use assert(pointer != NULL) instead of assert(pointer)
	to remove warnings from the Compaq C++ V6.5-035 compiler. 

	* src/tracediff/main.cpp:
	(17:04:24) Use assert(pointer != NULL) instead of assert(pointer)
	to remove warnings from the Compaq C++ V6.5-035 compiler. 

	* src/io_lib/ztr/ztr_translate.c:
	(17:45:52) Treat Read->basePos as 16-bit, which means hard-coding
	the first two bytes in ztr_encode_positions for each pos as zero. 

	* src/Misc/dstring.c:
	(17:46:48) "int" vs "size_t" so we can check the -1 return code
	from dstring_find(). 

	* src/g/g-request.c:
	(17:47:42) Remove compiler warning by using appropriate signness
	check in next_edtime(). 

	* src/gap4/IO2.h,
	* src/gap4/qualIO.c:
	(17:48:26) Corrected missing prototypes. 

	* src/gap4/clip.c:
	(17:48:54) Corrected missing prototypes. 

	* src/gap4/contig_selector.c,
	* src/gap4/template_display.c:
	(17:51:04) The check for a tag type being known when picking the
	colour to draw (wrongly) always succeeded, but it chose the default
	colour anyway. Now the check has been removed, as the default
	colour is an appropriate method. (ie just a compiler warning
	removal.) 

	* src/gap4/gap.tcl:
	(17:51:33) Version incr. 

	* src/gap4/io_utils.h:
	(17:52:35) Prevent compiler warnings caused by the gel_read macro
	always returning 0 (success), but being used in an "if
	(gel_read...)" context. Added a check for gelnum > 0 in order to
	provide a valid return code for the macro. 

	* src/gap4/join.c:
	(17:53:25) Fixed memory leak (not calling destroy_alignment_params)
	and reordered code slightly to remove an inconsequential compiler
	warning. 

	* src/mk/alpha.mk:
	(17:54:07) Changed default compilers to the Compaq cc/cxx/f77. 

	* src/tk_utils/tkTrace.c:
	(17:55:41) Use system installed png.h instead of local hack. 

	* src/tk_utils/Attic/png.h:
	(17:56:28) Removed to allow system version to be picked up. 

2004-03-02  jkbonfield  <jkbonfield>

	* src/gap4/IO.c:
	(17:26:01) Fix log files. Do not generate when the DB does not
	exist. Works better in read-only directories. 

2004-03-01  jkbonfield  <jkbonfield>

	* src/tk_utils/help_choose.tcl,
	* src/tk_utils/html_library.tcl:
	(10:30:28) The help_choose mechanism was broken due to having all
	the help_* files listed in the tclIndex. tcl-internal now also
	works too (removed the tkFocusOK function which was causing a
	auto-load loop as the official one is now ::tk::FocusOK; I do not
	think we needed the modified version anyway). 

	* src/tk_utils/tclIndex:
	(10:30:29) The help_choose mechanism was broken due to having all
	the help_* files listed in the tclIndex. tcl-internal now also
	works too (removed the tkFocusOK function which was causing a
	auto-load loop as the official one is now ::tk::FocusOK; I do not
	think we needed the modified version anyway). 

2004-02-27  jkbonfield  <jkbonfield>

	* src/g/g-files.c:
	(16:56:01) On the first database write after a flush Gap4 will
	check the global time stamp in the Aux header to make sure that the
	disk copy matches it's own cached in-mory copy.
	
	The rationale behind this is that users still manually remove the
	BUSY file because "they know best". They then act all suprised when
	their database becomes corrupt. Our alternative here is to check
	the master time-stamp in the Aux header and to simply abort Gap4
	(losing all unsaved edits) if it has been changed external to this
	process.
	
	This still leaves room for race conditions (multiple people editing
	simultaenously), but it covers the more common case of a gap4
	session left open for ages and then going back to it later. 

	* src/g/g-files.h,
	* src/g/g-request.c,
	* src/g/g-struct.c,
	* src/g/g-struct.h:
	(16:56:02) On the first database write after a flush Gap4 will
	check the global time stamp in the Aux header to make sure that the
	disk copy matches it's own cached in-mory copy.
	
	The rationale behind this is that users still manually remove the
	BUSY file because "they know best". They then act all suprised when
	their database becomes corrupt. Our alternative here is to check
	the master time-stamp in the Aux header and to simply abort Gap4
	(losing all unsaved edits) if it has been changed external to this
	process.
	
	This still leaves room for race conditions (multiple people editing
	simultaenously), but it covers the more common case of a gap4
	session left open for ages and then going back to it later. 

	* src/g/g-files.c:
	(16:57:45) Removed debugging message. 

2004-02-26  James Bonfield  <jkbonfield>

	* src/gap4/fij.tcl,
	* src/gap4/fij.c,
	* src/gap4/fij.h,
	* src/gap4/do_fij.c,
	* src/gap4/newgap_cmds.c,
	* src/gap4/newgap_structs.h:
	Added an option to control the maximum alignment length displayed
	from find internal joins (in the text output window).

2004-02-24  James Bonfield <jkbonfield>

	* src/gap4/gap-error.c:
	(09:33:43) Changed bug email addr to sourceforge url 

	* src/gap4/clip.c,
	* src/gap4/clip.h,
	* src/gap4/clip.tcl,
	* src/gap4/newgap_cmds.c,
	* src/gap4/tclIndex:
	(16:18:04) Added a "quality clip contig ends" function to trim back
	low quality data off the end of contigs. The purpose is to correct
	for phrap assemblies where clipping is typically done based on
	disagreements, and disagreements at the very end when depth=1 do
	not happen. This leads to 'rubbish' being at the contig end,
	devaluing the FIJ with "hidden data" turned off. 

	* tables/gaprc,
	* tables/gaprc_menu_full:
	(16:18:05) Added a "quality clip contig ends" function to trim back
	low quality data off the end of contigs. The purpose is to correct
	for phrap assemblies where clipping is typically done based on
	disagreements, and disagreements at the very end when depth=1 do
	not happen. This leads to 'rubbish' being at the contig end,
	devaluing the FIJ with "hidden data" turned off. 

	* src/gap4/trace_display.tcl:
	(16:19:07) Allow trace display linewidth to be a configurable
	parameter. 

2004-02-20  James Bonfield <jkbonfield>

	* src/prefinish/finish_long.c:
	(16:58:43) Fixed swapped reseq_nsolutions and long_nsolutions
	parameters. 

2004-02-19  James Bonfield <jkbonfield>

	* src/io_lib/exp_file/expFileIO.c:
	(12:13:52) Fixed typo in LG qualifier (was LF). 

	* src/io_lib/exp_file/expFileIO.h:
	(13:48:59) More type fixes; EFLT_LG was given the same number as
	_FT. Now diff. 

2004-02-18  James Bonfield <jkbonfield>

	* src/gap4/edUtils2.c:
	(10:23:31) Fixed a bug in the handling of DB_FLAG_INVIS and
	sequences being out of order due to clip-point adjustment. Hidden
	readings could be used for the consensus and unhidden would be
	skipped. It now uses _DBI_order() to resolve this. 

	* src/gap4/gap.tcl:
	(11:18:54) Updated version number. 

	* src/tk_utils/Makefile:
	(11:25:06) Added an explicit "." to the ln commands as SGIs do not
	allow for default to the current directory. 

	* src/text_utils/Makefile:
	(11:25:59) Added an explicit "." to the ln commands as SGIs do not
	allow for default to the current directory. 

	* src/tracediff/Makefile:
	(11:50:09) Added an explicit "." to the ln commands as SGIs do not
	allow for default to the current directory. 

2004-02-16  James Bonfield <jkbonfield>

	* src/prefinish/finish_filter.c,
	* src/prefinish/finish_filter.h:
	(15:32:40) Added GRL copyright notice 

	* src/prefinish/finish_filter.c,
	* src/prefinish/finish_filter.h:
	(15:32:42) Added GRL copyright notice 

2004-02-13  James Bonfield <jkbonfield>

	* ChangeLog:
	(09:18:33) Latest changelog summary, plus removal of email
	addresses. 

	* src/mk/global.mk:
	(09:22:54) Added TK_LIB to TEXTUTILS_LIB definition as on some
	systems the linker refuses to allow unresolved (but unused)
	symbols. 

2004-02-12  James Bonfield  <jkb>

	TAG CODEBASE with rel-1-4

2004-02-12  James Bonfield  <jkb>

	* src/gap4/edStructs.h,
	* src/gap4/edUtils.h,
	* src/gap4/edUtils2.c,
	* src/gap4/undo.c:
	(09:59:23) Fixed undo so that nested OpenUndo and CloseUndo work as
	expected (ie Undo undoes the outermost block and not the
	innermost). 

	* src/gap4/contig_editor.tcl,
	* src/gap4/tagEditor.c,
	* src/gap4/tag_editor.tcl,
	* src/gap4/tclIndex,
	* src/gap4/tkEditor.c:
	(10:00:48) Added tag editor "Move" and "Copy" buttons. These allow
	the tag position/length to be changed, from sequence to sequence,
	or even between contigs (between editors). 

	* LICENCE.txt:
	(10:27:00) Initial version

	* src/mutscan/main.cpp:
	(10:29:01) Added filtering for clusters of tags, as these are
	almost invariably due to broken alignments. 

	* src/Misc/dependencies,
	* src/abi/dependencies,
	* src/copy_reads/dependencies,
	* src/eba/dependencies,
	* src/find_renz/dependencies,
	* src/g/dependencies,
	* src/gap4/dependencies,
	* src/init_exp/dependencies,
	* src/io_lib/dependencies,
	* src/mutlib/dependencies,
	* src/polyA_clip/dependencies,
	* src/qclip/dependencies,
	* src/screen_seq/dependencies,
	* src/seq_utils/dependencies,
	* src/spin/dependencies,
	* src/stops/dependencies,
	* src/text_utils/dependencies:
	(10:32:01) Updated dependency files (from gmake depend)

2004-02-09  James Bonfield  <jkb>

	* src/io_lib/exp_file/expFileIO.c,
	* src/io_lib/exp_file/expFileIO.h:
	(14:39:52) Added LG (LiGation) to experiment file definition. 

2004-02-05  James Bonfield  <jkb>

	* gap4_production link updated (Sanger specific)

2004-02-03  James Bonfield  <jkb>

	* src/gap4/IO2.c,
	* src/gap4/enter_tags.tcl,
	* src/gap4/newgap_cmds.c,
	* src/gap4/newgap_structs.h,
	* src/gap4/preass.c,
	* src/gap4/tagU2.c,
	* src/gap4/tagUtils.h:
	(09:43:30) add_tags and enter_tags now allow for tags to be input
	in unpadded coordinates. 

	* src/gap4/gap-dbstruct.h:
	(09:43:46) Fixed comment for Nfreerecs. 

	* src/copy_reads/copy_reads.c:
	(09:58:11) Updated call of create_tag_for_gel. 

2004-01-27  James Bonfield  <jkb>

	* src/gap4/dis_readings.c:
	(10:17:09) Remove duplicates from fofn before disassembling as they
	cause infinite loops. 

	* src/gap4/tk-io-reg.c:
	(16:43:48) Add the 'contig busy' dialog to the quit_displays
	function so that disassemble readings and break contig have more
	visible error conditions. 

2004-01-22  James Bonfield  <jkb>

	* src/gap4/qual.c:
	(11:52:46) Changed the dependent_table[] to increment by 7
	initially instead of 8 so that the scores mirror the old version
	more closely. 

2004-01-21  James Bonfield  <jkb>

	* src/gap4/actf.c:
	(10:18:07) Commented out previous change to do with lockf on the
	database file. This is causing databases to claim they are locked
	when they are not. I believe this is due to problems with NFS lockd
	when machines crash and not getting an up to date cache of the lock
	status. 

	* src/g/g-files.c:
	(10:18:10) *** empty log message *** 

	* src/gap4/configure.tcl:
	(10:18:27) Dead code removal. 

	* src/gap4/qual.c:
	(10:19:53) David Harper spotted an inconsistency in the consensus
	calculation. When a pad is in a column depend_add[depth] is added
	per extra base (typically 8 per base, and then reducing bit by
	bit). When a pad is not in a column it adds 7*depth for all depth.
	
	The code now always uses the former array lookup method. 

	* src/tk_utils/config.tcl:
	(10:24:03) Updated font selector window. 

	* tables/tk_utilsrc:
	(10:24:50) Changed all unix font defs to use pixel sizes instead of
	point sizes. 

2004-01-14  The Badger Set [sc3]  <badger>

	* src/prefinish/Makefile,
	* src/prefinish/finish_cDNA_ends_only:
	(10:29:14) Updated make install and added the ends_only config
	script. 

2004-01-14  James Bonfield  <jkb>

	* src/tk_utils/user_defaults.tcl:
	(14:52:29) When loading up *rc files, source *rc.local too if it
	exists. This allows for easy installation of site-specific
	configurations. 

	* src/tk_utils/user_defaults.tcl:
	(14:54:26) Fixed a bug in the new .local code. 

	* src/seqed/Group.itcl,
	* src/seqed/checkedgetfname.itk,
	* src/seqed/dataentry.itk,
	* src/seqed/feature_editor.itk,
	* src/seqed/fileorlist.itcl,
	* src/seqed/getfname.itk,
	* src/seqed/group_close.gif,
	* src/seqed/group_open.gif,
	* src/seqed/hang_editor.itk,
	* src/seqed/orientedradiobox.itk,
	* src/seqed/renzymebox.itk,
	* src/seqed/seq.gif,
	* src/seqed/texteditor.itk:
	(15:51:07) Missing files added 

2004-01-13  James Bonfield  <jkb>

	* src/gap4/gap.tcl:
	Gap4 version "4.9 test 3"
	
2004-01-13  Mark Griffiths  <mng>

	* src/gap4/trace_display.tcl:
	(09:22:51) Fixed trace flash for trace display. 

2004-01-13  James Bonfield  <jkb>

	* src/io_lib/read/translate.c:
	(17:02:00) In read2exp only set the file format to be TT_EXP when
	'redirection to trace' is not enabled (ie it indicates where the
	sequence came from, EXP or SCF/ZTR/...). 

	* src/gap4/consen.c,
	* src/gap4/newgap_cmds.c,
	* src/gap4/newgap_structs.h,
	* src/gap4/consen.h,
	* src/gap4/consen.tcl,
	* tables/gaprc:
	(17:13:24) Save consensus now has the option to use the left-most
	template name instead of left-most reading name as the contig
	identifier. This is useful primarily for cDNA based projects. 

	* src/gap4/contig_editor.tcl,
	* src/gap4/tkEditor.c:
	(17:14:48) Positions are now listed in the "goto..." menu from the
	editor names. 

	* src/gap4/actf.c:
	* src/g/g-files.c,
	(17:16:25) We now use lockf() on the database file itself (DB.V,
	not DB.V.aux), thus preventing corruptions causing by manually
	removing the BUSY file. 

	* src/tk_utils/misc.c,
	* lib/tk/xmfbox.tcl:
	(17:22:07) Updated the tk Motif-style filebrowser to be MUCH faster
	(x80) by using the dir_or_file command from tk_utils (which was
	reimplemented to use Tcl_Obj and take a list as the argument). 

	* src/prefinish/finish_cDNA:
	(17:24:10) Removed blank -avail_template_file argument. 

	* src/prefinish/finish_hash.c:
	(17:25:49) Compare primer now checks for the sequence to hash being
	shorter than the hash word length, in order to avoid for hashing
	error messages. 

	* src/gap4/gap.tcl:
	(17:27:11) Update to version 4.9test3 

2004-01-12  Mark Griffiths  <mng>

	* src/gap4/gap_nav.tcl:
	(11:17:20) fixed bell before raising dialog. 

2004-01-12  James Bonfield  <jkb>

	* src/prefinish/finish_main.c:
	(10:35:03) Added a two-pass method to generate_experiments. Pick
	the most appropriate end for single-stranded experiments (as
	before), but if that fails we now work outwards from the other end
	too. This helps to pick experiments when our contig is covered
	entirely by a single-stranded region. 

	* src/prefinish/finish_walk.c:
	(10:35:44) We no longer rely on t_start1 and t_start2 when the
	template is inconsistent as the template positioning information
	may be invalid. Using min/max instead. 

	* src/prefinish/finish.c:
	(10:35:53) Updated version number. 

	* src/gap4/template.c:
	(11:47:45) Corrected guessing of template boundaries for
	"complemented" templates. 

	* src/prefinish/finish_walk.c:
	(12:35:54) Apply a cost increase to experiments that do not connect
	to at least one end of the problem region.
	
	The reason being that a problem from 1-1000 with reading length 600
	can be solved in 2 experiments, but chosing the first experiment
	(due to minor reasons like better primer) from 200-800 requires 2
	extra experiments to solve it. 

2004-01-09  Mark Griffiths  <mng>

	* doc/manual/dependencies,
	* doc/manual/gap4-t.texi:
	(14:19:12) contig navigation help added. 

	* src/gap4/contigEditor.c,
	* src/gap4/edUtils.h,
	* src/gap4/edUtils2.c,
	* src/gap4/newgap_cmds.c,
	* src/gap4/tclIndex:
	(14:21:15) Added -nojoin to edit_contig command , returning path to
	window. Added editor_id_to_edstruct. 

	* tables/gaprc,
	* tables/gaprc_menu_full:
	(14:21:44) Added contig navigation menu to View menu. 

	* doc/manual/contig_navigation-t.texi,
	* doc/manual/contig_navigation_browse.unix.gif,
	* doc/manual/contig_navigation_table.unix.gif:
	(14:24:36) Contig navigation help files. 

	* src/gap4/gap_nav.tcl:
	(14:25:21) Contig navigation interface. 

	* src/gap4/gap_nav.tcl:
	(15:53:06) Fixed next/previous bug and added error checks on
	contigs not found. 

2004-01-09  James Bonfield  <jkb>

	* lib/Makefile:
	* lib/tablelist3.4/**
	(14:42:07) Upgraded tablelist to v3.4 

2003-12-18  James Bonfield  <jkb>

	* src/tk_utils/text_output.c:
	(16:13:56) Include hostname in the log_file output 

	* src/gap4/dis_readings.c:
	(16:14:28) Fixed more tag corruptions from disassemble readings. 

2003-12-16 James Bonfield <jkb>

	TAG CODEBASE with rel-1-3
	Gap4 version "4.9 test 2"
	
2003-12-16  James Bonfield  <jkb>

	* src/gap4/gap.tcl:
	(16:54:09) Version incr. 

	* src/gap4/tagU2.c:
	(16:55:33) Improved error reporting of tag input. 

	* src/mutlib/array.hpp,
	* src/mutlib/caller_base.cpp:
	(16:56:27) Floating point error checking: divide by zero and
	log(0). 

	* src/prefinish/finish_cDNA:
	(16:58:28) Remove checking of template consistency. 

	* src/tracediff/main.cpp:
	(16:59:15) Disable experiment file redirection so that the base
	positions are valid. 

2003-12-08  James Bonfield  <jkb>

	* src/gap4/contig_editor.tcl,
	* src/gap4/edStructs.h,
	* src/gap4/edUtils2.c,
	* src/gap4/searchUtils.c,
	* src/gap4/tkEditor.c,
	* tables/gaprc_menu_full,
	* tables/gaprc:
	(12:06:48) Added new "group by" methods to the editor. In addition
	to the original "group by templates" we can group by strand, clone,
	name, number and position.
	
	Also fixed a bug in the "go to" function to jump to alternate reads
	on a template. After a join the cached contig number could be
	invalid, so the contig number is calculated on the fly. 

	* src/gap4/hash_lib.c:
	(12:08:00) Improved the align_blocks() function.
	
	(In some cases this caused the join editor "align" command to not
	work.) 

	* src/gap4/template.c:
	(12:09:17) check_template_length_overlap() has been rewritten to
	more correctly figure out if a template is inconsistent between two
	contigs. It now checks for primer inconsistencies, eg where two
	forward readings exist, but not at the same position or in
	differing orientations. 

	* staden.profile:
	(12:11:00) Removed "bash"isms. 

	* src/mutscan/main.cpp:
	(12:13:16) Added a call to read_experiment_redirect(), otherwise
	some traces read had no original position information. Also
	reformatted to remove windows linefeeds. 

	* src/prefinish/finish_cDNA:
	(12:13:38) Min template score is now 0.1 (instead of 0.3). 

2003-12-01 James Bonfield <jkb>

	TAG CODEBASE with rel-1-2
	Gap4 version "4.9 test 1"
	
2003-12-01 James Bonfield <jkb>

	* src/gap4/IO.h,
	* src/gap4/IO3.c:
	(15:22:09) Code tidyup to remove unused fortran functions 

	* src/gap4/contig_editor.tcl,
	* src/gap4/tkEdNames.c,
	* src/gap4/tkEditor.c,
	* src/gap4/edInterface.c,
	* src/gap4/tclIndex,
	* src/gap4/template.c,
	* src/gap4/list_proc.tcl:
	(15:23:08) Improved reading selection from within the editor. Added
	a "select all from right" option (and made it work snappily). 

	* src/gap4/break_contig.c,
	* src/gap4/dis_readings.c:
	(15:24:13) Fixed a tag corruption bug in disassemble readings
	whereby the annotation freelist could get joined onto the end of a
	contig list when duplicating tags (due to breaking a contig).
	
	Made tag duplication an option. 

	* src/gap4/contig_selector.tcl,
	* src/gap4/gap.tcl,
	* tables/gaprc:
	(15:27:41) Added -no_csel and -csel options to control whether the
	contig selector starts automatically. 

	* src/gap4/edUtils2.c:
	(15:28:41) Fixed a bug in computation of the number of spanning
	templates; displayed when shutting down the join editor. 

	* src/gap4/preass.c:
	(15:29:06) Replaced used of old fortran functions with C versions. 

	* src/gap4/edInterface.c,
	* src/gap4/template_display.c,
	* src/gap4/template_display.h:
	(15:30:14) Moved update_reading_list function to edInterface.c 

2003-11-26 James Bonfield <jkb>

	* src/gap4/break_contig.c,
	* src/gap4/dis_readings.c,
	* src/gap4/dis_readings.h,
	* src/gap4/dis_readings.tcl,
	* src/gap4/legacy.f,
	* src/gap4/newgap_cmds.c,
	* src/gap4/newgap_structs.h:
	(15:23:42) Fixed various disassemble readings bugs relating to
	annotations and splitting contigs. Whether to duplicate the
	annotations is now an option (although at present omitted from the
	GUI as it doesn't honour this flag in all cases).
	
	Break contig has also been rewritten to use disassemble readings as
	a basis for its operation.
	
	Finally, the fortran code for both disassemble readings and break
	contig has been ditched. 

	* src/gap4/IO3.c:
	(15:24:23) Fixed a bug in swap_read() (used by disassemble
	readings). It wasn't relinking the "prev" field of notes back to
	the newly renumbered sequence. 

	* src/gap4/copy_db.c:
	(15:24:51) Fixed a bug in merging the db.free_notes fields. 

	* src/gap4/find_oligo.tcl:
	(18:01:44) Remove pads from sequence in "find sequence" function
	before doing the search. (It matches padded data fine anyway, so
	this just avoids the user having the depad their query sequence.) 

2003-11-19 James Bonfield (jkb)

	* src/gap4/newgap_structs.h,
	* src/prefinish/fake_insert_sizes.tcl:
	*** empty log message *** 

	* src/prefinish/finish_cDNA:
	Added low_quality solution picking 

	* src/gap4/template.h:
	Fixed a bug in TEMP_DIRECTION macro where it returned direction -1
	for any error, rather than only on a TEMP_CONSIST_STRAND error. 

	* src/gap4/list_proc.tcl:
	Load List has an option to specify a list to be a "Reading List".
	This then automatically tags it with SEQID to allow hyperlinks to
	work. 

	* src/gap4/actf.c:
	Removed debugging 

	* src/gap4/template.c:
	When computing the template direction we now set this from the
	first contig in the list rather than the last. The first in the
	list will always be the first contig specified in
	init_template_checks, and so is the 'correct' contig for use within
	prefinish.
	
	The direction is also set to be the most frequent observed
	direction for that template, rather than ? when there is a
	conflict. 

	* src/prefinish/finish_long.c,
	* src/prefinish/finish_reverse.c,
	* src/prefinish/finish_walk.c:
	When setting the template direction we no longer set it to ? when
	there is an inconsistency. This means that the template direction
	will be set to the most well represented direction (unless it is
	50/50 split in which case it is still ?). 

2003-11-17 James Bonfield (jkb)

	* tables/gaprc:
	*** empty log message *** 

	* src/io_lib/utils/open_trace_file.c:
	Added ARC= and URL= RAWDATA search methods to fetch traces via the
	ensembl trace archive and via a URL. 

	* src/gap4/tkEdNames.c:
	Added Tcl_ResultResult call to to get_name method. 

	* src/gap4/contig_editor.tcl:
	Added a "clear list" option to the names widget. 

	* src/gap4/IO.h:
	Added prototype for IO.h 

	* src/gap4/actf.c:
	Include more prototypes. 

	* src/gap4/IO.c:
	Minor comment changes 

	* src/gap4/trace_display.tcl:
	Moved checking of file format to after trace widget has loaded the
	file. This removes the need to load the trace twice (the first load
	was in determine_trace_type, now not used). 

	* src/gap4/alter_rel.c,
	* src/gap4/alter_rel.h,
	* src/gap4/alter_rel.tcl,
	* src/gap4/assemble_direct.c,
	* src/gap4/dis_readings.c,
	* src/gap4/dis_readings.h:
	Moved the remove_contig_holes from assemble_direct to dis_readings.
	Rewrote remove contig as a disassemble (for entire contig). Major
	overhaul of disassemble readings. 

	* src/gap4/dis_readings.tcl,
	* src/gap4/newgap_cmds.c:
	New disassemble readings interface. 

	* src/seq_utils/align.c,
	* src/seq_utils/align.h:
	New function calignm(). Like calign(), but the alignment matrix
	(W128) is an argument. The default matrix is now case insensitive
	too. 

	* src/gap4/tagU2.c:
	Overhaul of split_contig_tags. 

	* src/gap4/legacy.f:
	Removed Fortran version of disassemble readings (now in C). 

	* src/mutlib/tracealign_interpolate.cpp:
	Removed a memory read-overflow. 

2003-11-14 James Bonfield (jkb)

	* src/tracediff/main.cpp:
	Converted cr/nl to nl.
	
	Fixed a bug in the printing of the tag positions. Positions
	presumably changed from being a single value to a pair - we just
	print the first element now. 

2003-11-13 James Bonfield (jkb)

	* src/gap4/IO2.c:
	Added code in stikit_ to set r.sense prior to calling
	io_write_seq(). The changes made a while back to io_write_seq() to
	update the in-memory io_length array caused the fortran code to
	break as it uses the sign of the length to set the orientation. 

2003-11-12 James Bonfield (jkb)

	* src/gap4/IO3.c:
	Protect against the template (subclone_id) in get_subclone_info
	from being zero and causing a crash. Only an issue for the old
	"suggest primers" function and gap2caf. 

2003-11-05 James Bonfield (jkb)

	* src/gap4/edUtils2.c:
	In the editor reading numbers now have +/- instead of <blank>/- to
	indicate strand. 

	* src/gap4/gap-error.c:
	Set email address to ask users to report bugs as
	syshelp 

	* src/gap4/contig_editor.tcl,
	* src/gap4/edUtils.h,
	* src/gap4/edUtils2.c,
	* src/gap4/template.c,
	* src/gap4/template.h,
	* src/gap4/tkEditor.c:
	Spanning template status is displayed from the join editor when the
	quit button is pressed. 

2003-11-04 James Bonfield (jkb)

	* src/gap4/template.c:
	Add template-end tolerance code to more locations to allow for
	missing vector at the end of primer-walks. 

	* tables/gaprc:
	Added in the colours of template status within the editor. 

	* src/gap4/contigEditor.c,
	* src/gap4/contig_editor.tcl,
	* src/gap4/dependencies,
	* src/gap4/edInterface.c,
	* src/gap4/edStructs.h,
	* src/gap4/edUtils.h,
	* src/gap4/edUtils2.c,
	* src/gap4/list_proc.tcl,
	* src/gap4/oligo_param.tcl,
	* src/gap4/tkEdNames.c,
	* src/gap4/tkEdUtils.c,
	* src/gap4/tkEditor.c,
	* src/gap4/tkEditor.h:
	Added template status analysis into the contig editor names
	display.
	
	The right-click menu now allows a "goto" option to jump to other
	members of that template.
	
	The menu also allows (de)selection of a single reading or
	(de)selection of all readings on that template. 

	* src/gap4/gap_globals.c:
	Default "chem_as_double" is now 0 (off) 

2003-10-27 James Bonfield (jkb)

	* src/gap4/vseqs.c,
	* tables/gaprc:
	*** empty log message *** 

	* src/gap4/find_oligo.c,
	* src/gap4/find_oligo.h,
	* src/gap4/find_oligo.tcl,
	* src/gap4/newgap_cmds.c,
	* src/gap4/newgap_structs.h:
	Added the ability to search by sequence within the readings as well
	as the consensus. 

	* src/gap4/contig_id.tcl:
	Bugfix to selection changes when using a "range" contig_id 

	* src/gap4/find_oligo.c:
	Fixed out by one error. 

2003-10-24 James Bonfield (jkb)

	* src/gap4/gap.tcl:
	*** empty log message *** 

	* src/io_lib/progs/extract_seq.c:
	Added a -fofn option 

	* src/gap4/oligo_param.tcl:
	Added a GC_Clamp option to the oligo selection dialogue, and
	remember the users inputs for some other bits. 

	* src/stops/stops.c:
	Added a baseline (-b) option to remove background. 

	* src/gap4/tagU1.c:
	Added protection for a defined, but empty, GTAGDB environment
	variable. 

	* src/gap4/edUtils2.c,
	* src/gap4/qual.h,
	* src/gap4/qualIO.c,
	* src/gap4/vseqs.c:
	Extended the database_info (and similar) callback functions to take
	new job types for insertion and deletion into sequences. This is
	currently only used by the new experimental shuffle pads option. 

	* src/gap4/IO.c,
	* src/gap4/actf.c:
	Improved log file handling to write out the username opening the
	database and a message when the lock file is overridden. 

	* src/io_lib/utils/compress.c:
	More error checking on writing compressed files. 

	* src/io_lib/abi/seqIOABI.c:
	Protect against the base spacing being listed as a negative number
	in the ABI file. 

	* src/mk/alpha.mk:
	Removed -rpath support as it causes more problems than it cures. 

	* src/gap4/contig_id.tcl,
	* src/gap4/editor_search.tcl:
	The contig identifier box and the 'value' component in the editor
	search boxes are now automatically selected and focused, meaning
	that users can simply type over the previous value. 

2003-10-23 James Bonfield (jkb)

	* src/gap4/do_fij.c,
	* src/gap4/hash_lib.c,
	* src/gap4/hash_lib.h:
	Fixed a bug in Find Internal Joins where it failed to spot some
	matches. 

2003-10-22 James Bonfield (jkb)

	* src/gap4/contig_editor.tcl:
	Added hyperlinks to the disassemble and 'set active list' lists
	created from the editor. 

2003-10-16  James Bonfield  <jkb>

	* src/prefinish/finish.[ch], src/prefinish/finish_utils.[ch]:
	Added an svec_as_cvec flag to allow SVEC tags to be treated as the
	clone end. This is useful for finishing EST sequences with one EST
	per contig.

2003-10-02 James Bonfield (jkb)

	* src/gap4/assemble_direct.c:
	Contig holes left after a disassembly are now stripped out, fixing
	db inconsistencies. This function will also be useful for the
	disassemble readings rewrite. 

2003-10-01 James Bonfield (jkb)

	* src/gap4/IO.c:
	Ensure that io_length() memory cache is kept up to date when
	io_write_seq modifies it. 

	* src/prefinish/fake_insert_sizes.tcl,
	* src/prefinish/finish_cDNA,
	* src/prefinish/svec2cvec.tcl:
	New scripts for interfacing with the chickenEST project and the new
	finish_me3 perl script. 

	* src/gap4/hash_lib.c:
	Set upper limit on the size of set_band_blocks to 5000 so that
	really long alignments do not consume too much memory. 

	* src/g/freetree.c:
	When we have a tr->largest block long enough to hold the requested
	length, we were returning NULL (due to broken code ordering)
	instead of returning the block. This causes the database to
	unnecessarily grow! 

2003-09-04 James Bonfield (jkb)

	* src/prefinish/finish.c,
	* src/prefinish/finish_main.c,
	* src/prefinish/finish_sanger.tcl:
	When searching for a solution on the bottom strand, set the
	position to solve as the right hand end of this problem. Likewise
	for the top strand (which is true by default). 

2003-09-02 James Bonfield (jkb)

	* src/prefinish/finish.c:
	Fixed default value of pwalk_nsolutions from 400 (a cut and paste
	error) to 1. Luckily finish.tcl specified this explicitly. 

2003-08-07  James Bonfield  <jkb>

	* src/seq_utils/dna_utils.c:
	Used (unsigned char) cast instead of (unsigned) for index to
	complementary base etc, otherwise it will cast to unsigned int and
	use a massive offset (4 billion or so) for 'negative' characters.

	* src/gap4/oligo_param.tcl (select_oligos):
	Made GC Clamp parameter configurable.
	Remember the search ahead/back and seq length parameters for the
	duration of the gap4 session.

2003-08-06  James Bonfield  <jkb>

	* src/io_lib/abi/seqIOABI.c:
	Prevent the SPAC (average spacing) in abi files from being
	negative. How does this happen?
	Also disabled the base reordering code as I believe this is not
	the correct thing to do.

2003-08-05  James Bonfield  <jkb>

	* lib/prefinish/finish.[ch]: 
	We now search for fake templates (func skip_fake_templates) based
	on looking for sequences without trace files. This is in addition
	to the usual skip_templates file and provides an easy automatic
	way of filtering out imported consensus sequences and the like.

	* src/g/freetree.c (tree_find_len):
	When we have a tr->largest block long enough to hold the requested
	length, we were returning NULL (due to broken code ordering)
	instead of returning the block. This causes the database to
	unnecessarily grow!

	* src/ftp/tk8.4.0/unix/tkUnixFont.c (Tk_DrawChars):
	Reverted the (my) patch to query the window size for optimising
	text printing, as the XGetGeometry call requires a round-trip
	message to the X server and hence gives very slow lag for remote
	connections.

2003-08-04  James Bonfield  <jkb>

	* src/io_lib/utils/compress.c: 
	Check for errors in fcompress_file. If the file created was fopened
	using wb and not wb+ and fwrite_reading is used, then
	fcompress_file will fail as the process cannot read back the file
	it wrote.

2003-07-30  James Bonfield  <jkb>

	* gap4_production link updated.

2003-07-23  James Bonfield  <jkb>

	* src/stops/stops.c: Fixed a bug in peak height clipping in the
	first 50 or so bases are all just noise (no signal). We now fill
	out peaks with non-clipped data and do height clipping after
	finding the best average region.

	* src/stops/stops.c: Added a baseline parameter to add a fixed
	amount to all peaks. This 'small sample correction' is used for
	preventing artificially good results when looking at very low
	scores.

2003-07-17  James Bonfield  <jkb>

	* src/prefinish/finish.c, src/prefinish/finish.tcl:
	Added -reseq_nsolutions, -long_nsolutions and -pwalk_nsolutions
	as configuration parameters.

	* src/prefinish/finish_main.c: (implement_solutions):
	Added a notion of a result type having a desired number of
	solutions to use. This is distinct from the number of items in a
	group. Eg we may want to pick 2 primers, and use 3 templates for
	each. The main purpose for this though is for picking more than 1
	resequence experiment for each problem.

	* src/prefinish/finish_long.c (experiment_reseq):
	Fixed a bug in the use of strand vs sense. We now check sense for
	resequencing experiments as it doesn't matter if it's fwd or
	reverse sequence, just that it heads in the right direction.

2003-07-16  James Bonfield  <jkb>

	* src/prefinish/finish_main.c (score_experiments):
	Improved the score of experiments that have large groups. Eg more
	templates for a primer-walk are better than one.

	* src/gap4/extract.c (extract_readings): 
	The sort_readings function now returns an allocated structure
	holding the anchor read. This is used for replacing next_AP_left,
	which was VERY slow compared to the new method.

	* src/gap4/assemble_direct.c (assemble_direct):
	Directed assembly now ignores SL/SR lines when working out the
	left and right clip points, as this breaks copying data with
	extract readings. FIXME: this should be made optional.

2003-07-15  James Bonfield  <jkb>

	* src/gap4/gap.tcl: Gap4 now 8.4b4.

2003-07-14  James Bonfield  <jkb>

	* src/tk_utils/tkTraceDisp.c:
	Added code to display signed values from trace files.

2003-07-10  James Bonfield  <jkb>

	* src/tk_utils/restriction_enzyme_map.c (plot_renz_matches):
	Corrected plotting to use padded_cut_site instead of cut_site.

	* src/seq_utils/renz_utils.h, src/gap4/restriction_enzymes.c:
	Added a 'padded_cut_site' element to the R_Match structure. This
	is used by gap4's restriction enzyme displays to store the padded
	positions, which are needed for plotting and cursor control. The
	original unpadded value is left in R_Match->cut_site and hence the
	text outputs of fragment sizes and positions are correct.

2003-07-07  James Bonfield  <jkb>

	* src/io_lib/abi/seqIOABI.c:
	Added support for reading phred-style confidence values from the
	ABI file.

2003-07-03  James Bonfield  <jkb>

	* src/prefinish/finish_filter.[ch], src/prefinish/finish.[ch],
	src/prefinish/finish_walk.c, src/prefinish/finish_main.c: 
	Added the filter_words algorithm into prefinish so that poly-A,
	GT-rich, etc can be filtered on. These are now also defined
	classification types and we check for different characters other
	than '#' in the finish_walk algorithms too.
	
2003-07-02  James Bonfield  <jkb>

	* src/stops/stops.c:
	Output now includes the sequence preceeding the stop.
	Can now specify a directory name instead of files and the code
	iterates through the directory looking for SCF, ZTR and ABI files.

	* src/gap4/contig_selector.c (DrawCSTags):
	Fixed a buffer overflow in creating the canvas item 'tag' list.

2003-07-01  James Bonfield  <jkb>

	* src/gap4/template.c:
	check_template_position() was resetting the consistency value to
	zero, which overwrites the CONSIST_STRAND flags. Deleted this.

2003-07-01  Rodger Staden  <rs@mrc-lmb.cam.ac.uk>

	* src/qclip/qclip.c (main):
	Set the maximum right hand quality clip to 10 million, as it was
	only 10K meaning reference/consensus sequences could be truncated.

2003-06-27  James Bonfield  <jkb>

	* src/gap4/edUtils2.c (DBgetTags): 
	Call DBgetSeq from DBgetTags to ensure the sequence info has been
	loaded; specifically sequence length. This is needed as DBgetTags
	does tag validity checking. Normally the sequence is loaded before
	the tags, but at startup the other way around can now occur due to
	the new multi-tag-under-cursor changes.
	
	* src/gap4/tman_interface.c (save_trace_images):
	Corrected mutation report generation when the mini-traces are shown.

2003-06-26  James Bonfield  <jkb>

	* src/gap4/tman_diff.c (diff_readings):
	When a trace isn't there to diff against, we now create a blank
	Read instead of returning NULL. This fixes a bug of missing
	difference traces causing the mutation report to fail.

	* src/tk_utils/tkTrace.c (drawable_to_png):
	Better error handling. If png_create_write_struct failed it
	crashed trying to free png_ptr.

	* src/gap4/edMutations.c (sort_mutations):
	Remove buffer overflow. (Index using 1-N on an array alloc of N.)

	* src/gap4/searchUtils.c (edDoSearch):
	Searching could miss hits (eg tags, and probably many other
	things) when Group Readings by Templates was enabled.

2003-06-25  James Bonfield  <jkb>

	* src/gap4/edUtils2.c (showCursor, onScreen):
	Scrolling down sequences when the Y-depth was too high would
	position the cursor on a sequence underneath the consensus line
	without Y scrolling the editor window properly.

	* src/gap4/contig_selector.tcl (EditCSTagDetails),
	src/gap4/contig_selector.c (DrawCSTags):
	New function with a binding "Edit contig at tag pos" menu. Right
	clicking in a tag in the contig selector now allows the editor to
	be brought up at that position.

2003-06-24  James Bonfield  <jkb>

	* src/gap4/contig_editor.tcl:
	Set -tearoffs 0 on cascading edit tag and delete tag menus.

	* distrib/unix-S1_1b/tables/gaprc:
	Adjusted a few defaults to match the Sanger defaults (where
	appropriate globally). We still need to maintain a sanger diff
	though for definite-local changes (such as huge fonts and
	'hotpink' highlight colours).

	* src/stops/stops.c:
	Tweak the default parameters to use a longer window length and
	fixed a bug in identifying stops to skip.

	* src/prefinish/add_stops.tcl:
	New script to parse the 'stops' program output and add gap4 STOP
	tags.

2003-06-20  James Bonfield  <jkb>

	* src/prefinish/finish_walk.c(find_primers):
	When generating consensus for primer3 we now check the
	dust-filtering so as not to pick primers from low complexity
	sequence. These were filtered out later, but it's faster to prefilter.
	
	* src/prefinish/dust.c, src/prefinish/finish.tcl:
	Tweaks the dust window from 64 to 48 and adjusted the dust score
	accordingly.

	* src/prefinish/finish.c, src/prefinish/finish_main.[ch]:
	Added code to keep track of when a 'virtual sequence' overlaps
	another virtual sequence. If more than 2/3rds of it does then we
	start applying a penalty. This is designed to filter out the cases
	where repeating a primer-walk just a few bases further along
	solves a few more bases.

	* src/gap4/contig_editor.tcl
	Reenabled the "after 1000" Any-Configure binding for the editor as
	it seemed to necessary to prevent flickering on the Neon systems.

2003-06-19  James Bonfield  <jkb>

	* src/gap4/vseqs.c(link_vrseq): 
	For creation of new virtual sequences from the consensus we now
	change consensus '-' characters into 'A'. This is with the
	assumption that the new sequence will not be undetermined at that
	point (but obviously it may not be A). The reason for this is to
	fix the consensus confidence, otherwise it'd remain at 1 (like all
	'-'s).

	* src/stops/*:
	First version of the 'stop' detector. At present it just outputs the 
	info to stdout. 

	* src/gap4/clip.[ch], src/gap4/clip.tcl, src/gap4/newgap_cmds.c,
	src/gap4/tclIndex, tables/gaprc, tables/gaprc_menu_full:
	Added a clip sequence by %age of non-ACGT (labelled N-clip). This
	solves a phrap alignment bug.

	* src/gap4/tag_editor.tcl:
	Fixed a bug with loading tag macros from .gaprc.

2003-06-16  James Bonfield  <jkb>

	* src/gap4/trace_display.tcl (trace_flash): 
	Replace the trace-flash window to cover the whole height of the
	trace instead of +40 onwards. (+40 was inappropriate after we
	moved the base calls from the top to the bottom of the trace.)
	
	* src/gap4/contig_editor.tcl:
	Added 'break' to F1-F10 bindings so that the global keyboard menu
	traversal bindings do trigger.

2003-06-11  James Bonfield  <jkb>

	* src/gap4/contigEditor.c, src/gap4/contig_editor.tcl,
	src/gap4/oligo.c, src/gap4/tagEditor.c, src/gap4/tagU1.c,
	src/gap4/tagUtils.h, src/gap4/tkEditor.c, tables/gaprc_menu_full:
	The Edit Tag and Delete tag editor commands are now cascading
	menus containing the list of all tags underneath the editing
	cursor. These lists are updated even if the menus have been torn
	off and after undo, etc.

2003-06-09  James Bonfield  <jkb>

	* tables/gaprc_menu_full, tables/gaprc,
	src/gap4/contig_editor.tcl:
	Added an option to the Edit Modes menu to turn off fast tag
	deletion using F12 as this could be considered a dangerous option
	to allow by default.

2003-06-06  James Bonfield  <jkb>

	* src/prefinish/finish.c: set to version 1.19

	* src/prefinish/finish.tcl:
	Changed the optimisation on solving low consensus confidence
	problems; we now always check both strands. Slower, but better in
	some cases (and never worse).

	* src/prefinish/finish_main.c:
	Fixed setting classify bit CONTIG_LEFT_END and CONTIG_RIGHT_END so
	that the 'problem' is cleared when a sequence extends the contig.

	Added code to correctly score sequences that extend the contig (if
	extending is required) even though the problem being solved may
	not be the contig-extend problem.

	Added a +50% score bonus to any experiment that also solves all
	mandatory problems +/- 100 bases around the sequence. This gives
	an encouragement to not leave tiny problems which require another
	experiment.

	* src/prefinish/finish_walk.c:
	Rewrote the near_low_complexity() function. We are now allowed to
	use primers that are near a low complexity sequence provided the
	sequence extends though it and into at least opts.pwalk_seq_gap
	bases of non-low-complexity sequence.

	* src/gap4/contig_editor.tcl:
	Changed F11/F12 and Shift-F11/F12 to edit/delete tag for faster
	tag work.

	* src/gap4/editor_search.tcl, tables/gaprc:
	Remember the editor Search window settings as the default for new
	editors, so that we do not need to keep changing the dialogue.

	* src/gap4/list_contigs.tcl (ListContigsRepopulate): 
	Reset the yview after processing a REG_LENGTH or REG_JOIN_TO event
	so that the contig list stays scrolled to the same point.

2003-06-04  James Bonfield  <jkb>

	* tables/gaprc:
	Added PRIMER.max_end_stability (=9) definition and adjusted the
	PRIMER.self_any definition from 4 to 5.

	* src/gap4/primlib.[ch]:
	Added max_end_stability as a configurable option to send to
	Primer3.

	* src/prefinish/finish.c, src/prefinish/finish.tcl,
	src/prefinish/param_primer3.itcl:
	Added support for specifying self_any, self_end, gc_clamp,
	max_poly_x, and max_end_stability primer3 options to the prefinish
	code and we now set these values in the example finish.tcl file.

2003-06-03  James Bonfield  <jkb>

	* src/gap4/list_contigs.tcl (InitListContigs,
	ListContigsSelectPressBindng):
	Added a binding to update the global contig-identifier (and hence
	update open dialogue boxes) when clicking on a contig in the List
	Contigs box.

2003-05-30  James Bonfield  <jkb>

	* src/gap4/dbcheck.c (check_readings):
	We now check that all sequence contains printable characters. This
	is an attempt to spot the source of the nul characters appearing
	in some sequences, although check database is now some 25% slower.

	* src/tk_utils/container.c (container_scroll_x, container_scroll_y): 
	Added a check for when get_container returns NULL (which it was
	doing due to being called incorrectly via the name-clash listed
	below).
	
	* src/gap4/contig_selector.tcl:
	* src/gap4/template_display.tcl:
	* src/gap4/gap_canvas_box.tcl:
	* src/gap4/gap_restriction_enzymes.tcl:
	* src/gap4/quality_plot.tcl:
	* src/gap4/stop_codon.tcl:
	* src/gap4/consistency_display.tcl:
	* src/gap4/confidence_graph.tcl:
	* src/gap4/reading_coverage.tcl:
	* src/gap4/readpair_coverage.tcl:
	* src/gap4/strand_coverage.tcl:
	Renamed scroll_x to gc_scroll_x, scroll_y to gc_scroll_y and
	get_next_row to c_get_next_row.
	This is to avoid name clashes with Kathryn's new spin2 container
	code in tk_utils (it seemed easier to rename the bits that I
	vaguely understand!).

2003-05-29  James Bonfield  <jkb>

	* src/gap4/oligo.c (edSelectOligoGenerate):
	src/gap4/primlib.c (primlib_choose): 
	Fixed error handling when no primers are found; to solve a memory
	corruption and a crash.

	* tables/gaprc:
	Adjusted primer3 settings for self_any, opt_length, gc_clamp and
	max_poly_x.

	* src/gap4/primlib.[ch]:
	Added gc_clamp and max_poly_x, as a cofigurable parameter.
	Corrected parsing in primlib_str2args such that when the last
	parameter has a 1-character value it is still
	processed. (Previously it was just silently skipped.)

	* src/tk_utils/tkTraceIO.c (trace_init_pos): 
	Corrected the generation of blank trace arrays for EXP or PLN
	format sequences. We allocate the correct size traceA/C/G/T arrays
	and zero them. Without this change double clicking on a sequence
	in the editor whose trace is listed as an Experiment File that
	does not contain a LN line would cause a crash.

	* trace_display.tcl (trace_add): 
	Allow EXP files to be used for traces so that we can view traces
	via the LN/LT redirection.

	* src/gap4/edInterface.c (edSetCursor): 
	Corrected setting of xx->cursorSeq when the Y scrollbar is in use
	and the user clicks on the consensus. (This now means that all
	traces can be brought up again in such situations by double
	clicking on the consensus.)

	* src/gap4/tkEdUtils.c (positionCursor): 
	Due to switching the sequence to be at the bottom of the trace
	instead of the top the editing cursor in the editor was invisible
	(underneath the first line of trace) when embedded traces were in
	use. Now fixed

2003-05-27  James Bonfield  <jkb>

	* src/prefinish/rules/extend_left.rule,
	src/prefinish/rules/extend_right.rule:
	In the GUI prefinish configurator, we set the default strand for
	left and right contig extensions to be bottom and top
	respectively. Previously these were back to front resulting in
	pointless experiments!

	* src/gap4/tag_checklist.tcl (TagDialog_default):
	The "As Default" command now saves to the users .gaprc file too.

	* src/gap4/tag_checklist.tcl (tag_checklist):
	Select All and Clear All buttons are back (and where missing due
	to a typo).
	

2003-05-23  James Bonfield  <jkb>

	* src/gap4/newgap_cmds.c (tcl_save_contig_order),
	  src/gap4/list_contigs.tcl (ListContigsSave):
	Added a save_contig_order Tcl/C command to write a new contig
	order (for all contigs). The "List Contigs" window now has a Save
	button which uses this to save the currently sorted order.

	* src/gap4/oligo.c (display_oligo_details):
	Added code to print the oligo details to the editor information
	line as well as to the Text Output window.

	* src/gap4/oligo_param.tcl (seloli_doit): Delete the code to blank the
	status line when bringing up the first primer after a manual (in
	editor) primer search.

2003-05-22  James Bonfield  <jkb>

	* src/prefinish/finish_hash.c (hash_compare_primer): 
	Fix 'end' argument passed to false_priming. For bottom strand
	primers it was mixing up 5' and 3' ends and adding weight to the
	wrong one. Also minor debugging output changes.

	* src/prefinish/finish_walk.c: Changed the cost multiplier for
	primer secondary matches to be 1+pscore/100 instead of
	1+pscore/20, as the score doesn't seem to have a significant
	impact.

	* src/prefinish/tooltips.tcl (popup): Check for existance of a
	tooltip window and destroy it first if it exists. This fixes Tk
	errors (caused by rapid generation of events?).

2003-05-20  James Bonfield  <jkb>

	* lib/tk/text.tcl (::tk::TextScanDrag): Allow 1 pixel of movement
	before switching to scan mode and setting mouseMoved flag. The
	mouseMoved flag disables pasting, and hence forceful middle
	clicking sometimes failed to paste.

2003-05-19  James Bonfield  <jkb>

	* src/gap4/join.c (align, alignOverlap): 
	Alignments now depad the sequence before using Rodger's alignment
	code. To deal with repadding I used the old code and converted the
	output from Rodger's algorithm to be compatible with the Myers and
	Miller style of output.
	Also fixed a display shift after aligning.
